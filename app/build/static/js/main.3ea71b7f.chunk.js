(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t,n){},308:function(e,t,n){e.exports=n(681)},680:function(e,t,n){},681:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(48),i=n.n(o),l=n(16),c=n(112),s=n(686),u=n(45),d={ONSNACK:"ONSNACK",ONLOADER:"ONLOADER",SIGNUP:"SIGNUP",SIGNUPACCESS:"SIGNUPACCESS",SIGNIN:"SIGNIN",SIGNINSUCCESS:"SIGNINSUCCESS",SIGNINFAILURE:"SIGNINFAILURE",SIGNOUT:"SIGNOUT",SIGNOUTSUCCESS:"SIGNOUTSUCCESS",SIGNOUTFAILURE:"SIGNOUTFAILURE",ISLOGGEDIN:"ISLOGGEDIN",ISLOGGEDINSUCCESS:"ISLOGGEDINSUCCESS",ISLOGGEDINFAILURE:"ISLOGGEDINFAILURE",PRODUCTSAVE:"PRODUCTSAVE",PRODUCTSAVESUCCESS:"PRODUCTSAVESUCCESS",PRODUCTSAVEFAILURE:"PRODUCTSAVEFAILURE",GETPRODUCT:"GETPRODUCT",GETPRODUCTSUCCESS:"GETPRODUCTSUCCESS",GETPRODUCTFAILURE:"GETPRODUCTFAILURE",UPDATEPRODUCT:"UPDATEPRODUCT",UPDATEPRODUCTSUCCESS:"UPDATEPRODUCTSUCCESS",UPDATEPRODUCTFAILURE:"UPDATEPRODUCTFAILURE",DELETEPRODUCT:"DELETEPRODUCT",DELETEPRODUCTSUCCESS:"DELETEPRODUCTSUCCESS",DELETEPRODUCTFAILURE:"DELETEPRODUCTFAILURE",VENDORSAVE:"VENDORSAVE",VENDORSAVESUCCESS:"VENDORSAVESUCCESS",VENDORSAVEFAILURE:"VENDORSAVEFAILURE",GETVENDOR:"GETVENDOR",GETVENDORSUCCESS:"GETVENDORSUCCESS",GETVENDORFAILURE:"GETVENDORFAILURE",UPDATEVENDOR:"UPDATEVENDOR",UPDATEVENDORSUCCESS:"UPDATEVENDORSUCCESS",UPDATEVENDORFAILURE:"UPDATEVENDORFAILURE",DELETEVENDOR:"DELETEVENDOR",DELETEVENDORSUCCESS:"DELETEVENDORSUCCESS",DELETEVENDORFAILURE:"DELETEVENDORFAILURE",CLIENTSAVE:"CLIENTSAVE",CLIENTSAVESUCCESS:"CLIENTSAVESUCCESS",CLIENTSAVEFAILURE:"CLIENTSAVEFAILURE",GETCLIENT:"GETCLIENT",GETCLIENTSUCCESS:"GETCLIENTSUCCESS",GETCLIENTFAILURE:"GETCLIENTFAILURE",UPDATECLIENT:"UPDATECLIENT",UPDATECLIENTSUCCESS:"UPDATECLIENTSUCCESS",UPDATECLIENTFAILURE:"UPDATECLIENTFAILURE",DELETECLIENT:"DELETECLIENT",DELETECLIENTSUCCESS:"DELETECLIENTSUCCESS",DELETECLIENTFAILURE:"DELETECLIENTFAILURE",PURCHASESAVE:"PURCHASESAVE",PURCHASESAVESUCCESS:"PURCHASESAVESUCCESS",PURCHASESAVEFAILURE:"PURCHASESAVEFAILURE",GETPURCHASE:"GETPURCHASE",GETPURCHASESUCCESS:"GETPURCHASESUCCESS",GETPURCHASEFAILURE:"GETPURCHASEFAILURE",UPDATEPURCHASE:"UPDATEPURCHASE",UPDATEPURCHASESUCCESS:"UPDATEPURCHASESUCCESS",UPDATEPURCHASEFAILURE:"UPDATEPURCHASEFAILURE",DELETEPURCHASE:"DELETEPURCHASE",DELETEPURCHASESUCCESS:"DELETEPURCHASESUCCESS",DELETEPURCHASEFAILURE:"DELETEPURCHASEFAILURE",SALESAVE:"SALESAVE",SALESAVESUCCESS:"SALESAVESUCCESS",SALESAVEFAILURE:"SALESAVEFAILURE",GETSALE:"GETSALE",GETSALESUCCESS:"GETSALESUCCESS",GETSALEFAILURE:"GETSALEFAILURE",UPDATESALE:"UPDATESALE",UPDATESALESUCCESS:"UPDATESALESUCCESS",UPDATESALEFAILURE:"UPDATESALEFAILURE",DELETESALE:"DELETESALE",DELETESALESUCCESS:"DELETESALESUCCESS",DELETESALEFAILURE:"DELETESALEFAILURE",PAYMENTSAVE:"PAYMENTSAVE",PAYMENTSAVESUCCESS:"PAYMENTSAVESUCCESS",PAYMENTSAVEFAILURE:"PAYMENTSAVEFAILURE",GETPAYMENT:"GETPAYMENT",GETPAYMENTSUCCESS:"GETPAYMENTSUCCESS",GETPAYMENTFAILURE:"GETPAYMENTFAILURE",UPDATEPAYMENT:"UPDATEPAYMENT",UPDATEPAYMENTSUCCESS:"UPDATEPAYMENTSUCCESS",UPDATEPAYMENTFAILURE:"UPDATEPAYMENTFAILURE",DELETEPAYMENT:"DELETEPAYMENT",DELETEPAYMENTSUCCESS:"DELETEPAYMENTSUCCESS",DELETEPAYMENTFAILURE:"DELETEPAYMENTFAILURE",RECOVERYSAVE:"RECOVERYSAVE",RECOVERYSAVESUCCESS:"RECOVERYSAVESUCCESS",RECOVERYSAVEFAILURE:"RECOVERYSAVEFAILURE",GETRECOVERY:"GETRECOVERY",GETRECOVERYSUCCESS:"GETRECOVERYSUCCESS",GETRECOVERYFAILURE:"GETRECOVERYFAILURE",UPDATERECOVERY:"UPDATERECOVERY",UPDATERECOVERYSUCCESS:"UPDATERECOVERYSUCCESS",UPDATERECOVERYFAILURE:"UPDATERECOVERYFAILURE",DELETERECOVERY:"DELETERECOVERY",DELETERECOVERYSUCCESS:"DELETERECOVERYSUCCESS",DELETERECOVERYFAILURE:"DELETERECOVERYFAILURE"},p={profile:{},products:[],vendors:[],clients:[],purchases:[],sales:[],payments:[],recoveries:[],isLoading:!1,isSnackOpen:!1,snackMessage:""},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.ONSNACK:return Object(u.a)({},e,{isSnackOpen:t.payload.snack,snackMessage:t.payload.message});case d.ONLOADER:return Object(u.a)({},e,{isLoading:t.payload});case d.SIGNOUT:return Object(u.a)({},e,{isLoading:!0});case d.SIGNOUTSUCCESS:case d.SIGNOUTFAILURE:return Object(u.a)({},e,{profile:{},products:[],vendors:[],clients:[],purchases:[],sales:[],payments:[],recoveries:[],isLoading:!1});case d.ISLOGGEDIN:return Object(u.a)({},e,{isLoading:!0});case d.ISLOGGEDINSUCCESS:return Object(u.a)({},e,{isLoading:!1,profile:t.payload});case d.ISLOGGEDINFAILURE:return Object(u.a)({},e,{isLoading:!1});case d.UPDATEVENDORSUCCESS:case d.DELETEVENDORSUCCESS:case d.VENDORSAVESUCCESS:case d.UPDATEPRODUCTSUCCESS:case d.DELETEPRODUCTSUCCESS:case d.PRODUCTSAVESUCCESS:case d.CLIENTSAVESUCCESS:case d.UPDATECLIENTSUCCESS:case d.DELETECLIENTSUCCESS:case d.PURCHASESAVESUCCESS:case d.UPDATEPURCHASESUCCESS:case d.DELETEPURCHASESUCCESS:case d.SALESAVESUCCESS:case d.UPDATESALESUCCESS:case d.DELETESALESUCCESS:case d.PAYMENTSAVESUCCESS:case d.UPDATEPAYMENTSUCCESS:case d.DELETEPAYMENTSUCCESS:case d.RECOVERYSAVESUCCESS:case d.UPDATERECOVERYSUCCESS:case d.DELETERECOVERYSUCCESS:return Object(u.a)({},e,{isLoading:!1,isSnackOpen:!0,snackMessage:t.payload});case d.UPDATEVENDORFAILURE:case d.DELETEVENDORFAILURE:case d.VENDORSAVEFAILURE:case d.UPDATEPRODUCTFAILURE:case d.DELETEPRODUCTFAILURE:case d.PRODUCTSAVEFAILURE:case d.CLIENTSAVEFAILURE:case d.UPDATECLIENTFAILURE:case d.DELETECLIENTFAILURE:case d.PURCHASESAVEFAILURE:case d.UPDATEPURCHASEFAILURE:case d.DELETEPURCHASEFAILURE:case d.SALESAVEFAILURE:case d.UPDATESALEFAILURE:case d.DELETESALEFAILURE:case d.PAYMENTSAVEFAILURE:case d.UPDATEPAYMENTFAILURE:case d.DELETEPAYMENTFAILURE:case d.RECOVERYSAVEFAILURE:case d.UPDATERECOVERYFAILURE:case d.DELETERECOVERYFAILURE:return Object(u.a)({},e,{isSnackOpen:!0,snackMessage:t.payload});case d.GETPRODUCTSUCCESS:return Object(u.a)({},e,{products:t.payload});case d.GETVENDORSUCCESS:return Object(u.a)({},e,{vendors:t.payload});case d.GETCLIENTSUCCESS:return Object(u.a)({},e,{clients:t.payload});case d.GETPURCHASESUCCESS:return Object(u.a)({},e,{purchases:t.payload});case d.GETSALESUCCESS:return Object(u.a)({},e,{sales:t.payload});case d.GETPAYMENTSUCCESS:return Object(u.a)({},e,{payments:t.payload});case d.GETRECOVERYSUCCESS:return Object(u.a)({},e,{recoveries:t.payload});default:return Object(u.a)({},e)}},m=n(684),f=n(80),v=n(194),h=n(236),b=n(3),S={onSnackHandler:function(e){return{type:d.ONSNACK,payload:e}},onLoader:function(e){return{type:d.ONLOADER,payload:e}},signUp:function(e){return{type:d.SIGNUP,payload:e}},signUpAccess:function(e){return{type:d.SIGNUPACCESS,payload:e}},signIn:function(e){return{type:d.SIGNIN,payload:e}},signInSuccess:function(e){return{type:d.SIGNINSUCCESS,payload:e}},signInFailure:function(e){return{type:d.SIGNINFAILURE,payload:e}},signOut:function(){return{type:d.SIGNOUT}},signOutSuccess:function(){return{type:d.SIGNOUTSUCCESS}},signOutFailure:function(){return{type:d.SIGNOUTSUCCESS}},isLoggedIn:function(){return{type:d.ISLOGGEDIN}},isLoggedInSuccess:function(e){return{type:d.ISLOGGEDINSUCCESS,payload:e}},isLoggedInFailure:function(e){return{type:d.ISLOGGEDINFAILURE,payload:e}},productSave:function(e){return{type:d.PRODUCTSAVE,payload:e}},productSaveSuccess:function(e){return{type:d.PRODUCTSAVESUCCESS,payload:e}},productSaveFailure:function(e){return{type:d.PRODUCTSAVEFAILURE,payload:e}},getProduct:function(e){return{type:d.GETPRODUCT,payload:e}},getProductSuccess:function(e){return{type:d.GETPRODUCTSUCCESS,payload:e}},getProductFailure:function(e){return{type:d.GETPRODUCTFAILURE,payload:e}},updateProduct:function(e){return{type:d.UPDATEPRODUCT,payload:e}},updateProductSuccess:function(e){return{type:d.UPDATEPRODUCTSUCCESS,payload:e}},updateProductFailure:function(e){return{type:d.UPDATEPRODUCTFAILURE,payload:e}},deleteProduct:function(e){return{type:d.DELETEPRODUCT,payload:e}},deleteProductSuccess:function(e){return{type:d.DELETEPRODUCTSUCCESS,payload:e}},deleteProductFailure:function(e){return{type:d.DELETEPRODUCTFAILURE,payload:e}},vendorSave:function(e){return{type:d.VENDORSAVE,payload:e}},vendorSaveSuccess:function(e){return{type:d.VENDORSAVESUCCESS,payload:e}},vendorSaveFailure:function(e){return{type:d.VENDORSAVEFAILURE,payload:e}},getVendor:function(e){return{type:d.GETVENDOR,payload:e}},getVendorSuccess:function(e){return{type:d.GETVENDORSUCCESS,payload:e}},getVendorFailure:function(e){return{type:d.GETVENDORFAILURE,payload:e}},updateVendor:function(e){return{type:d.UPDATEVENDOR,payload:e}},updateVendorSuccess:function(e){return{type:d.UPDATEVENDORSUCCESS,payload:e}},updateVendorFailure:function(e){return{type:d.UPDATEVENDORFAILURE,payload:e}},deleteVendor:function(e){return{type:d.DELETEVENDOR,payload:e}},deleteVendorSuccess:function(e){return{type:d.DELETEVENDORSUCCESS,payload:e}},deleteVendorFailure:function(e){return{type:d.DELETEVENDORFAILURE,payload:e}},clientSave:function(e){return{type:d.CLIENTSAVE,payload:e}},clientSaveSuccess:function(e){return{type:d.CLIENTSAVESUCCESS,payload:e}},clientSaveFailure:function(e){return{type:d.CLIENTSAVEFAILURE,payload:e}},getClient:function(e){return{type:d.GETCLIENT,payload:e}},getClientSuccess:function(e){return{type:d.GETCLIENTSUCCESS,payload:e}},getClientFailure:function(e){return{type:d.GETCLIENTFAILURE,payload:e}},updateClient:function(e){return{type:d.UPDATECLIENT,payload:e}},updateClientSuccess:function(e){return{type:d.UPDATECLIENTSUCCESS,payload:e}},updateClientFailure:function(e){return{type:d.UPDATECLIENTFAILURE,payload:e}},deleteClient:function(e){return{type:d.DELETECLIENT,payload:e}},deleteClientSuccess:function(e){return{type:d.DELETECLIENTSUCCESS,payload:e}},deleteClientFailure:function(e){return{type:d.DELETECLIENTFAILURE,payload:e}},purchaseSave:function(e){return{type:d.PURCHASESAVE,payload:e}},purchaseSaveSuccess:function(e){return{type:d.PURCHASESAVESUCCESS,payload:e}},purchaseSaveFailure:function(e){return{type:d.PURCHASESAVEFAILURE,payload:e}},getPurchase:function(){return{type:d.GETPURCHASE}},getPurchaseSuccess:function(e){return{type:d.GETPURCHASESUCCESS,payload:e}},getPurchaseFailure:function(e){return{type:d.GETPURCHASEFAILURE,payload:e}},deletePurchase:function(e){return{type:d.DELETEPURCHASE,payload:e}},deletePurchaseSuccess:function(e){return{type:d.DELETEPURCHASESUCCESS,payload:e}},deletePurchaseFailure:function(e){return{type:d.DELETEPURCHASEFAILURE,payload:e}},updatePurchase:function(e){return{type:d.UPDATEPURCHASE,payload:e}},updatePurchaseSuccess:function(e){return{type:d.UPDATEPURCHASESUCCESS,payload:e}},updatePurchaseFailure:function(e){return{type:d.UPDATEPURCHASEFAILURE,payload:e}},saleSave:function(e){return{type:d.SALESAVE,payload:e}},saleSaveSuccess:function(e){return{type:d.SALESAVESUCCESS,payload:e}},saleSaveFailure:function(e){return{type:d.SALESAVEFAILURE,payload:e}},getSale:function(){return{type:d.GETSALE}},getSaleSuccess:function(e){return{type:d.GETSALESUCCESS,payload:e}},getSaleFailure:function(e){return{type:d.GETSALEFAILURE,payload:e}},updateSale:function(e){return{type:d.UPDATESALE,payload:e}},updateSaleSuccess:function(e){return{type:d.UPDATESALESUCCESS,payload:e}},updateSaleFailure:function(e){return{type:d.UPDATESALEFAILURE,payload:e}},deleteSale:function(e){return{type:d.DELETESALE,payload:e}},deleteSaleSuccess:function(e){return{type:d.DELETESALESUCCESS,payload:e}},deleteSaleFailure:function(e){return{type:d.DELETESALEFAILURE,payload:e}},paymentSave:function(e){return{type:d.PAYMENTSAVE,payload:e}},paymentSaveSuccess:function(e){return{type:d.PAYMENTSAVESUCCESS,payload:e}},paymentSaveFailure:function(e){return{type:d.PAYMENTSAVEFAILURE,payload:e}},getPayment:function(){return{type:d.GETPAYMENT}},getPaymentSuccess:function(e){return{type:d.GETPAYMENTSUCCESS,payload:e}},getPaymentFailure:function(e){return{type:d.GETPAYMENTFAILURE,payload:e}},updatePayment:function(e){return{type:d.UPDATEPAYMENT,payload:e}},updatePaymentSuccess:function(e){return{type:d.UPDATEPAYMENTSUCCESS,payload:e}},updatePaymentFailure:function(e){return{type:d.UPDATEPAYMENTFAILURE,payload:e}},deletePayment:function(e){return{type:d.DELETEPAYMENT,payload:e}},deletePaymentSuccess:function(e){return{type:d.DELETEPAYMENTSUCCESS,payload:e}},deletePaymentFailure:function(e){return{type:d.DELETEPAYMENTFAILURE,payload:e}},recoverySave:function(e){return{type:d.RECOVERYSAVE,payload:e}},recoverySaveSuccess:function(e){return{type:d.RECOVERYSAVESUCCESS,payload:e}},recoverySaveFailure:function(e){return{type:d.RECOVERYSAVEFAILURE,payload:e}},getRecovery:function(){return{type:d.GETRECOVERY}},getRecoverySuccess:function(e){return{type:d.GETRECOVERYSUCCESS,payload:e}},getRecoveryFailure:function(e){return{type:d.GETRECOVERYFAILURE,payload:e}},updateRecovery:function(e){return{type:d.UPDATERECOVERY,payload:e}},updateRecoverySuccess:function(e){return{type:d.UPDATERECOVERYSUCCESS,payload:e}},updateRecoveryFailure:function(e){return{type:d.UPDATERECOVERYFAILURE,payload:e}},deleteRecovery:function(e){return{type:d.DELETERECOVERY,payload:e}},deleteRecoverySuccess:function(e){return{type:d.DELETERECOVERYSUCCESS,payload:e}},deleteRecoveryFailure:function(e){return{type:d.DELETERECOVERYFAILURE,payload:e}}},g="https://inventory-app-mern.herokuapp.com/api",y={post:function(e,t,n){var a=g+e;return b.Observable.ajax({url:a,method:t,body:n,headers:{"Content-Type":"application/json"},async:!0,crossDomain:!0,withCredentials:!0,createXHR:function(){return new XMLHttpRequest},responseType:"json"})},get:function(e,t){var n=g+e;return b.Observable.ajax({url:n,method:t,headers:{"Content-Type":"application/json"},async:!0,crossDomain:!0,withCredentials:!0,createXHR:function(){return new XMLHttpRequest},responseType:"json"})},put:function(e,t,n){var a=g+e;return b.Observable.ajax({url:a,method:t,body:n,headers:{"Content-Type":"application/json"},async:!0,crossDomain:!0,withCredentials:!0,createXHR:function(){return new XMLHttpRequest},responseType:"json"})},delete:function(e,t){var n=g+e;return b.Observable.ajax({url:n,method:t,headers:{"Content-Type":"application/json"},async:!0,crossDomain:!0,withCredentials:!0,createXHR:function(){return new XMLHttpRequest},responseType:"json"})},signUp:function(e,t,n){var a=g+e;return b.Observable.ajax({url:a,method:t,body:n,headers:{"Content-Type":"application/json"},async:!0,crossDomain:!0,createXHR:function(){return new XMLHttpRequest},responseType:"json"})},signOut:function(e,t){var n=g+e;return b.Observable.ajax({url:n,method:t,headers:{"Content-Type":"application/json"},async:!0,crossDomain:!0,withCredentials:!0,createXHR:function(){return new XMLHttpRequest},responseType:"json"})}},C={signUp:function(e){return e.pipe(Object(h.a)(d.SIGNUP),Object(f.a)(function(e){var t=e.payload;return y.signUp("/user/signup","POST",t).pipe(Object(f.a)(function(e){return"string"===typeof e.response&&b.Observable.of(S.onLoader(!0),S.onLoader(!1),S.signUpAccess(),S.onSnackHandler({snack:!0,message:e.response}))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.signUpAccess(),S.onSnackHandler({snack:!0,message:e.response})):b.Observable.of(S.signUpAccess(),S.onSnackHandler({snack:!0,message:"Network Error"}))}))}))},signIn:function(e){return e.pipe(Object(h.a)(d.SIGNIN),Object(f.a)(function(e){var t=e.payload;return Object.values(t).every(function(e){return Boolean(e)})?y.post("/user/signin","POST",t).pipe(Object(f.a)(function(e){return"string"===typeof e.response&&b.Observable.of(S.signInSuccess(),S.isLoggedIn(),S.onSnackHandler({snack:!0,message:e.response}))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.signInFailure(),S.onSnackHandler({snack:!0,message:e.response})):b.Observable.of(S.signInFailure(),S.onSnackHandler({snack:!0,message:"Network Error"}))})):b.Observable.of(S.signInFailure(),S.onSnackHandler({snack:!0,message:"Please Enter Email & Password, in order to login"}))}))},signOut:function(e){return e.pipe(Object(h.a)(d.SIGNOUT),Object(f.a)(function(){return y.signOut("/user/logout","POST").pipe(Object(f.a)(function(e){return"string"===typeof e.response&&b.Observable.of(S.signOutSuccess(),S.onSnackHandler({snack:!0,message:e.response}))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.signOutFailure(),S.onSnackHandler({snack:!0,message:e.response})):b.Observable.of(S.signOutFailure(),S.onSnackHandler({snack:!0,message:"Network Error"}))}))}))},isLoggedIn:function(e){return e.pipe(Object(h.a)(d.ISLOGGEDIN),Object(f.a)(function(){return y.get("/user","GET").pipe(Object(f.a)(function(e){return e.response.doc?b.Observable.of(S.isLoggedInSuccess(e.response.doc)):b.Observable.of(S.isLoggedInFailure("Token Expired"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.isLoggedInFailure(),S.onSnackHandler({snack:!0,message:e.response})):b.Observable.of(S.isLoggedInFailure(),S.onSnackHandler({snack:!0,message:"Network Error"}))}))}))}},O=function(e,t,n){return{condition:_.getState().purchases.some(function(t){return t.products.find(function(t){return t.productId._id===e})}),message:"Transaction found for this ".concat(t," you can't ").concat(n," it")}},N={productSave:function(e){return e.pipe(Object(h.a)(d.PRODUCTSAVE),Object(f.a)(function(e){var t=e.payload;return Object.values(t).every(function(e){return Boolean(e)})?y.post("/product","POST",t).pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.onLoader(!0),S.productSaveSuccess(e.response)):b.Observable.of(S.productSaveFailure("Something went wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.productSaveFailure(e.response)):b.Observable.of(S.productSaveFailure("Network Error"))})):b.Observable.of(S.productSaveFailure("All fields are required"))}))},getProduct:function(e){return e.pipe(Object(h.a)(d.GETPRODUCT),Object(f.a)(function(){return y.get("/product","GET").pipe(Object(f.a)(function(e){return e.response.products.length?b.Observable.of(S.getProductSuccess(e.response.products)):b.Observable.of(S.getProductSuccess([]))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.getProductFailure(e.response)):b.Observable.of(S.getProductFailure("Network Error"))}))}))},updateProduct:function(e){return e.pipe(Object(h.a)(d.UPDATEPRODUCT),Object(f.a)(function(e){var t=e.payload,n=O(t._id,"Product","Edit");return n.condition?b.Observable.of(S.updateProductFailure(n.message)):Object.values(t).entries(function(e){return Boolean(e)})?y.put("/product/".concat(t._id),"PUT",t).pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.onLoader(!0),S.updateProductSuccess(e.response)):b.Observable.of(S.updateProductFailure("Something went Wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.updateProductFailure(e.response)):b.Observable.of(S.updateProductFailure("Network Failure"))})):b.Observable.of(S.updateProductFailure("All fields are required"))}))},deleteProduct:function(e){return e.pipe(Object(h.a)(d.DELETEPRODUCT),Object(f.a)(function(e){var t=e.payload,n=O(t,"Product","Delete");return n.condition?b.Observable.of(S.updateProductFailure(n.message)):y.delete("/product/".concat(t),"DELETE").pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.deleteProductSuccess(e.response)):b.Observable.of(S.deleteProductFailure("Something went Wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.deleteProductFailure(e.response)):b.Observable.of(S.deleteProductFailure("Network Failure"))}))}))}},P=function(e,t,n){return{condition:_.getState().purchases.some(function(t){return t.vendorId._id===e}),message:"Transaction found for this ".concat(t," you can't ").concat(n," it")}},T={vendorSave:function(e){return e.pipe(Object(h.a)(d.VENDORSAVE),Object(f.a)(function(e){var t=e.payload;return Object.values(t).every(function(e){return Boolean(e)})?y.post("/vendor","POST",t).pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.onLoader(!0),S.vendorSaveSuccess(e.response)):b.Observable.of(S.vendorSaveFailure("Something went wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.vendorSaveFailure(e.response)):b.Observable.of(S.vendorSaveFailure("Network Error"))})):b.Observable.of(S.vendorSaveFailure("All fields are required"))}))},getVendor:function(e){return e.pipe(Object(h.a)(d.GETVENDOR),Object(f.a)(function(){return y.get("/vendor","GET").pipe(Object(f.a)(function(e){return e.response.vendors.length?b.Observable.of(S.getVendorSuccess(e.response.vendors)):b.Observable.of(S.getVendorSuccess([]))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.getVendorFailure(e.response)):b.Observable.of(S.getVendorFailure("Network Error"))}))}))},updateVendor:function(e){return e.pipe(Object(h.a)(d.UPDATEVENDOR),Object(f.a)(function(e){var t=e.payload,n=P(t._id,"Vendor","Edit");return n.condition?b.Observable.of(S.updateVendorFailure(n.message)):Object.values(t).entries(function(e){return Boolean(e)})?y.put("/vendor/".concat(t._id),"PUT",t).pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.onLoader(!0),S.updateVendorSuccess(e.response)):b.Observable.of(S.updateVendorFailure("Something went Wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.updateVendorFailure(e.response)):b.Observable.of(S.updateVendorFailure("Network Error"))})):b.Observable.of(S.updateVendorFailure("All fields are required"))}))},deleteVendor:function(e){return e.pipe(Object(h.a)(d.DELETEVENDOR),Object(f.a)(function(e){var t=e.payload,n=P(t,"Vendor","Delete");return n.condition?b.Observable.of(S.deleteVendorFailure(n.message)):y.delete("/vendor/".concat(t),"DELETE").pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.deleteVendorSuccess(e.response)):b.Observable.of(S.deleteVendorFailure("Something went Wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.deleteVendorFailure(e.response)):b.Observable.of(S.deleteVendorFailure("Network Error"))}))}))}},L=function(e,t,n){return{condition:_.getState().sales.some(function(t){return t.clientId._id===e}),message:"Transaction found for this ".concat(t," you can't ").concat(n," it")}},A={clientSave:function(e){return e.pipe(Object(h.a)(d.CLIENTSAVE),Object(f.a)(function(e){var t=e.payload;return Object.values(t).every(function(e){return Boolean(e)})?y.post("/client","POST",t).pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.onLoader(!0),S.clientSaveSuccess(e.response)):b.Observable.of(S.clientSaveFailure("Something went wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.clientSaveFailure(e.response)):b.Observable.of(S.clientSaveFailure("Network Error"))})):b.Observable.of(S.clientSaveFailure("All fields are required"))}))},getClient:function(e){return e.pipe(Object(h.a)(d.GETCLIENT),Object(f.a)(function(){return y.get("/client","GET").pipe(Object(f.a)(function(e){return e.response.clients.length?b.Observable.of(S.getClientSuccess(e.response.clients)):b.Observable.of(S.getClientSuccess([]))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.getClientFailure(e.response)):b.Observable.of(S.getClientFailure("Network Error"))}))}))},updateClient:function(e){return e.pipe(Object(h.a)(d.UPDATECLIENT),Object(f.a)(function(e){var t=e.payload,n=L(t._id,"Client","Edit");return n.condition?b.Observable.of(S.updateClientFailure(n.message)):Object.values(t).entries(function(e){return Boolean(e)})?y.put("/client/".concat(t._id),"PUT",t).pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.onLoader(!0),S.updateClientSuccess(e.response)):b.Observable.of(S.updateClientFailure("Something went Wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.updateClientFailure(e.response)):b.Observable.of(S.updateClientFailure("Network Failure"))})):b.Observable.of(S.updateClientFailure("All fields are required"))}))},deleteClient:function(e){return e.pipe(Object(h.a)(d.DELETECLIENT),Object(f.a)(function(e){var t=e.payload,n=L(t,"Client","Delete");return n.condition?b.Observable.of(S.deleteClientFailure(n.message)):y.delete("/client/".concat(t),"DELETE").pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.deleteClientSuccess(e.response)):b.Observable.of(S.deleteClientFailure("Something went Wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.deleteClientFailure(e.response)):b.Observable.of(S.deleteClientFailure("Network Failure"))}))}))}},R=function(){var e=_.getState(),t=e.purchases,n=e.sales,a=e.products,r={};return a.forEach(function(e){return r[e._id]=0}),t.forEach(function(e){return e.products.forEach(function(e){return r[e.productId._id]+=e.quantity})}),n.forEach(function(e){return e.products.forEach(function(e){return r[e.productId._id]-=e.quantity})}),r},U=function(e,t,n){return{condition:_.getState().payments.some(function(t){return t.details.find(function(t){return t.purchaseId===e})}),message:"Transaction found for this ".concat(t," you can't ").concat(n," it")}},I={purchaseSave:function(e){return e.pipe(Object(h.a)(d.PURCHASESAVE),Object(f.a)(function(e){var t=e.payload;return Object.values(t).every(function(e){return Boolean(e)})?y.post("/purchase","POST",t).pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.onLoader(!0),S.purchaseSaveSuccess(e.response)):b.Observable.of(S.purchaseSaveFailure("Something went wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.purchaseSaveFailure(e.response)):b.Observable.of(S.purchaseSaveFailure("Network Error"))})):b.Observable.of(S.purchaseSaveFailure("All fields are required"))}))},getPurchase:function(e){return e.pipe(Object(h.a)(d.GETPURCHASE),Object(f.a)(function(){return y.get("/purchase","GET").pipe(Object(f.a)(function(e){return e.response.length?b.Observable.of(S.getPurchaseSuccess(e.response)):b.Observable.of(S.getPurchaseSuccess([]))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.getPurchaseFailure(e.response)):b.Observable.of(S.getPurchaseFailure("Network Error"))}))}))},updatePurchase:function(e){return e.pipe(Object(h.a)(d.UPDATEPURCHASE),Object(f.a)(function(e){var t=e.payload,n=U(t._id,"Purchase","Edit");if(n.condition)return b.Observable.of(S.updatePurchaseFailure(n.message));var a=R(),r=[];return t.products.forEach(function(e){if(e.oldProductId)if(e.oldProductId===e.productId){var t=+a[e.oldProductId]-+e.oldQuantity+ +e.quantity;t<0&&r.push("if Block: ".concat(e.productName," will be negative by ").concat(t))}else{var n=+a[e.oldProductId]-+e.oldQuantity;n<0&&r.push("else Block: ".concat(e.productName," will be negative by ").concat(n))}}),r.length?b.Observable.of(S.updatePurchaseFailure("Please rectify errors")):y.put("/purchase/".concat(t._id),"PUT",t).pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.onLoader(!0),S.updatePurchaseSuccess(e.response)):b.Observable.of(S.updatePurchaseFailure("something wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.updatePurchaseFailure(e.response)):b.Observable.of(S.updatePurchaseFailure("Network Error"))}))}))},deletePurchase:function(e){return e.pipe(Object(h.a)(d.DELETEPURCHASE),Object(f.a)(function(e){var t=e.payload,n=U(t,"Purchase","delete");if(n.condition)return b.Observable.of(S.deletePurchaseFailure(n.message));var a=R(),r=_.getState().purchases.find(function(e){return e._id===t}).products,o=[];return r.forEach(function(e){+a[e.productId._id]-+e.quantity<0&&o.push("".concat(e.productId.productName," will be negative by ").concat(a[e.productId._id]-e.quantity))}),o.length?b.Observable.of(S.deletePurchaseFailure(o.join(", "))):y.delete("/purchase/".concat(t),"DELETE").pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.deletePurchaseSuccess(e.response)):b.Observable.of(S.deletePurchaseFailure("something wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.deletePurchaseFailure(e.response)):b.Observable.of(S.deletePurchaseFailure("Network Error"))}))}))}},j=function(){var e=_.getState(),t=e.purchases,n=e.sales,a=e.products,r={};return a.forEach(function(e){return r[e._id]=0}),t.forEach(function(e){return e.products.forEach(function(e){return r[e.productId._id]+=e.quantity})}),n.forEach(function(e){return e.products.forEach(function(e){return r[e.productId._id]-=e.quantity})}),r},D=function(e,t,n){return{condition:_.getState().recoveries.some(function(t){return t.details.find(function(t){return t.saleId===e})}),message:"Transaction found for this ".concat(t," you can't ").concat(n," it")}},F={saleSave:function(e){return e.pipe(Object(h.a)(d.SALESAVE),Object(f.a)(function(e){var t=e.payload,n=[];t.products.forEach(function(e){n.push(Object.values(e).every(function(e){return Boolean(e)||!1===e}))}),Object.values(t).forEach(function(e){n.push(Object.values(e).every(function(e){return Boolean(e)}))});var a=[],r=j();return t.products.forEach(function(e){r[e.productId]<e.quantity&&a.push("".concat(e.productName," will be negative by ").concat(r[e.productId]-e.quantity))}),a.length?b.Observable.of(S.saleSaveFailure("Please resolve errors")):n.every(function(e){return Boolean(e)})?y.post("/sale","POST",t).pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.onLoader(!0),S.saleSaveSuccess(e.response)):b.Observable.of(S.saleSaveFailure("Something went wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.saleSaveFailure(e.response)):b.Observable.of(S.saleSaveFailure("Network Error"))})):b.Observable.of(S.saleSaveFailure("All fields are required"))}))},getSale:function(e){return e.pipe(Object(h.a)(d.GETSALE),Object(f.a)(function(){return y.get("/sale","GET").pipe(Object(f.a)(function(e){return e.response.length?b.Observable.of(S.getSaleSuccess(e.response)):b.Observable.of(S.getSaleSuccess([]))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.getSaleFailure(e.response)):b.Observable.of(S.getSaleFailure("Network Error"))}))}))},updateSale:function(e){return e.pipe(Object(h.a)(d.UPDATESALE),Object(f.a)(function(e){var t=e.payload,n=D(t._id,"Sale","edit");if(n.condition)return b.Observable.of(S.updateSaleFailure(n.message));var a=[];t.products.forEach(function(e){a.push(Object.values(e).every(function(e){return Boolean(e)||!1===e}))}),Object.values(t).forEach(function(e){a.push(Object.values(e).every(function(e){return Boolean(e)}))});var r=[],o=j();return t.products.forEach(function(e){e.oldProductId===e.productId?o[e.oldProductId]+e.oldQuantity-e.quantity<0&&r.push("".concat(e.productName," will be negative by ").concat(o[e.productId]-e.quantity)):o[e.productId]-e.quantity<0&&r.push("".concat(e.productName," will be negative by ").concat(o[e.productId]-e.quantity))}),r.length?b.Observable.of(S.updateSaleFailure("Please resolve errors")):a.every(function(e){return Boolean(e)})?y.put("/sale/".concat(t._id),"PUT",t).pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.onLoader(!0),S.updateSaleSuccess(e.response)):b.Observable.of(S.updateSaleFailure("Something went wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.updateSaleFailure(e.response)):b.Observable.of(S.updateSaleFailure("Network Error"))})):b.Observable.of(S.updateSaleFailure("All fields are required"))}))},deleteSale:function(e){return e.pipe(Object(h.a)(d.DELETESALE),Object(f.a)(function(e){var t=e.payload,n=D(t,"Sale","delete");return n.condition?b.Observable.of(S.deleteSaleFailure(n.message)):y.delete("/sale/".concat(t),"DELETE").pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.deleteSaleSuccess(e.response)):b.Observable.of(S.deleteSaleFailure("something wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.deleteSaleFailure(e.response)):b.Observable.of(S.deleteSaleFailure("Network Error"))}))}))}},k={paymentSave:function(e){return e.pipe(Object(h.a)(d.PAYMENTSAVE),Object(f.a)(function(e){var t=e.payload,n=[];return t.details.forEach(function(e){n.push(Object.values(e).every(function(e){return!1===e||Boolean(e)}))}),n.push(Object.values(t).every(function(e){return Boolean(e)})),n.every(function(e){return Boolean(e)})?y.post("/payment","POST",t).pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.onLoader(!0),S.paymentSaveSuccess(e.response)):b.Observable.of(S.paymentSaveFailure("Something went wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.paymentSaveFailure(e.response)):b.Observable.of(S.paymentSaveFailure("Network Error"))})):b.Observable.of(S.paymentSaveFailure("All fields are required"))}))},getPayment:function(e){return e.pipe(Object(h.a)(d.GETPAYMENT),Object(f.a)(function(){return y.get("/payment","GET").pipe(Object(f.a)(function(e){return e.response.length?b.Observable.of(S.getPaymentSuccess(e.response)):b.Observable.of(S.getPaymentSuccess([]))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.getPaymentFailure(e.response)):b.Observable.of(S.getPaymentFailure("Network Error"))}))}))},updatePayment:function(e){return e.pipe(Object(h.a)(d.UPDATEPAYMENT),Object(f.a)(function(e){var t=e.payload,n=[];return t.details.forEach(function(e){n.push(Object.values(e).every(function(e){return!1===e||Boolean(e)}))}),n.push(Object.values(t).every(function(e){return Boolean(e)})),n.every(function(e){return Boolean(e)})?y.put("/payment/".concat(t._id),"PUT",t).pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.onLoader(!0),S.updatePaymentSuccess(e.response)):b.Observable.of(S.updatePaymentFailure("something wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.updatePaymentFailure(e.response)):b.Observable.of(S.updatePaymentFailure("Network Error"))})):b.Observable.of(S.updatePaymentFailure("All Fields are Required"))}))},deletePayment:function(e){return e.pipe(Object(h.a)(d.DELETEPAYMENT),Object(f.a)(function(e){var t=e.payload;return y.delete("/payment/".concat(t),"DELETE").pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.deletePaymentSuccess(e.response)):b.Observable.of(S.deletePaymentFailure("Something went wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.updatePaymentFailure(e.response)):b.Observable.of(S.updatePaymentFailure("Network Error"))}))}))}},w={recoverySave:function(e){return e.pipe(Object(h.a)(d.RECOVERYSAVE),Object(f.a)(function(e){var t=e.payload,n=[];return t.details.forEach(function(e){n.push(Object.values(e).every(function(e){return!1===e||Boolean(e)}))}),n.push(Object.values(t).every(function(e){return Boolean(e)})),n.every(function(e){return Boolean(e)})?y.post("/recovery","POST",t).pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.onLoader(!0),S.recoverySaveSuccess(e.response)):b.Observable.of(S.recoverySaveFailure("Something went wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.recoverySaveFailure(e.response)):b.Observable.of(S.recoverySaveFailure("Network Error"))})):b.Observable.of(S.recoverySaveFailure("All fields are required"))}))},getRecovery:function(e){return e.pipe(Object(h.a)(d.GETRECOVERY),Object(f.a)(function(){return y.get("/recovery","GET").pipe(Object(f.a)(function(e){return e.response.length?b.Observable.of(S.getRecoverySuccess(e.response)):b.Observable.of(S.getRecoverySuccess([]))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.getRecoveryFailure(e.response)):b.Observable.of(S.getRecoveryFailure("Network Error"))}))}))},updateRecovery:function(e){return e.pipe(Object(h.a)(d.UPDATERECOVERY),Object(f.a)(function(e){var t=e.payload,n=[];return t.details.forEach(function(e){n.push(Object.values(e).every(function(e){return!1===e||Boolean(e)}))}),n.push(Object.values(t).every(function(e){return Boolean(e)})),n.every(function(e){return Boolean(e)})?y.put("/recovery/".concat(t._id),"PUT",t).pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.onLoader(!0),S.updateRecoverySuccess(e.response)):b.Observable.of(S.updateRecoveryFailure("something wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.updateRecoveryFailure(e.response)):b.Observable.of(S.updateRecoveryFailure("Network Error"))})):b.Observable.of(S.updateRecoveryFailure("All Fields are Required"))}))},deleteRecovery:function(e){return e.pipe(Object(h.a)(d.DELETERECOVERY),Object(f.a)(function(e){var t=e.payload;return y.delete("/recovery/".concat(t),"DELETE").pipe(Object(f.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.deleteRecoverySuccess(e.response)):b.Observable.of(S.deleteRecoveryFailure("something wrong"))}),Object(v.a)(function(e){return"string"===typeof e.response?b.Observable.of(S.deleteRecoveryFailure(e.response)):b.Observable.of(S.deleteRecoveryFailure("Network Error"))}))}))}},V=Object(m.a)(C.signUp,C.signIn,C.signOut,C.isLoggedIn,N.productSave,N.getProduct,N.updateProduct,N.deleteProduct,T.vendorSave,T.getVendor,T.updateVendor,T.deleteVendor,A.clientSave,A.getClient,A.updateClient,A.deleteClient,I.purchaseSave,I.getPurchase,I.updatePurchase,I.deletePurchase,F.saleSave,F.getSale,F.updateSale,F.deleteSale,k.paymentSave,k.getPayment,k.updatePayment,k.deletePayment,w.recoverySave,w.getRecovery,w.updateRecovery,w.deleteRecovery),x=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.c,G=Object(s.a)(),H=Object(c.d)(E,x(Object(c.a)(G)));G.run(V);var _=H,B=n(13),M=n(14),Y=n(17),q=n(15),z=n(18),W=n(688),X=n(687),K=n(2),Q=n(25),J=(n(163),function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(Y.a)(this,Object(q.a)(t).call(this))).handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(Q.a)({},a,r))},e.onSignInHandler=function(){var t=e.state,n=t.email,a=t.password;e.props.signIn({email:n,password:a})},e.gotoSignUp=function(){e.props.history.push("/signup")},e.state={email:"shahan@domain.com",password:"123abc456"},e}return Object(z.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){return this.props.store.profile.email?this.props.history.push("/dashboard"):this.props.history.push("/")}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return r.a.createElement("div",{className:"paper-style"},r.a.createElement(K.e,{elevation:4,className:"inner-paper-styling"},r.a.createElement(K.m,{align:"center",color:"primary",variant:"h5",gutterBottom:!0},r.a.createElement("span",{className:"outline-it"},"Login Portal")),r.a.createElement(K.m,{align:"center",color:"textSecondary",variant:"h6"},"Sign In"),r.a.createElement(K.l,{autoFocus:!0,type:"text",name:"email",value:t,label:"Email",onChange:this.handleChange,fullWidth:!0,variant:"outlined",margin:"dense"}),r.a.createElement(K.l,{type:"password",name:"password",value:n,label:"Password",onChange:this.handleChange,fullWidth:!0,variant:"outlined",margin:"dense"}),r.a.createElement(K.a,{variant:"contained",fullWidth:!0,children:"Sign In",color:"primary",size:"large",onClick:this.onSignInHandler}),r.a.createElement("hr",null),r.a.createElement("div",{className:"ask-signup"},r.a.createElement(K.m,{align:"center",children:"Don't have an Account ? ",color:"textSecondary"}),r.a.createElement(K.a,{variant:"outlined",children:"Create Account Now",color:"secondary",size:"medium",onClick:this.gotoSignUp}))))}}]),t}(a.Component)),$=Object(l.b)(function(e){return{store:e}},function(e){return{signIn:function(t,n){return e(S.signIn(t,n))}}})(J),Z=n(64),ee=n(121),te=n.n(ee),ne=n(122),ae=n.n(ne),re=n(123),oe=n.n(re),ie=n(124),le=n.n(ie),ce=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(Y.a)(this,Object(q.a)(t).call(this,e))).state={value:e.value,labelWidth:0},n}return Object(z.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){this.setState({labelWidth:i.a.findDOMNode(this.InputLabelRef).offsetWidth})}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.range,o=t.criteria,i=t.theLabel,l=t.theField,c=t.toChange;return r.a.createElement("div",{className:n.root},r.a.createElement(oe.a,{variant:"outlined",className:n.formControl},r.a.createElement(ae.a,{ref:function(t){e.InputLabelRef=t},htmlFor:"values-for-select-list"},i),r.a.createElement(le.a,{native:!0,value:l,onChange:c,input:r.a.createElement(te.a,{name:o,labelWidth:this.state.labelWidth,id:"values-for-select-list"})},r.a.createElement("option",{value:""}),a.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))))}}]),t}(r.a.Component),se=Object(Z.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{marginTop:.5*e.spacing.unit,marginBottom:.5*e.spacing.unit,minWidth:"100%"}}})(ce),ue=function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(Y.a)(this,Object(q.a)(t).call(this))).handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(Q.a)({},a,r))},e.gotoSignIn=function(){e.props.history.push("/")},e.onSignUpHandler=function(){return Object.values(e.state).every(function(e){return!0===Boolean(e)})?e.props.signUp(e.state):e.props.onSnackHandler(!0,"All Fields are required")},e.state={email:"shahan@domain.com",password:"123abc456",confirmPassword:"123abc456",mobile:"0336-2122588",dob:"1986-01-29",first:"Shahan",last:"Ahmed Khan",gender:"Male",maritalStatus:"Married",cnic:"42301-8964999-9"},e}return Object(z.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){if(this.props.store.profile.email)return this.props.history.push("/dashboard")}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.confirmPassword,o=e.mobile,i=e.dob,l=e.first,c=e.last,s=e.gender,u=e.cnic,d=e.maritalStatus;return r.a.createElement("div",{className:"paper-style"},r.a.createElement(K.e,{elevation:4,className:"inner-paper-styling"},r.a.createElement(K.m,{align:"center",color:"primary",variant:"h5",gutterBottom:!0},r.a.createElement("span",{className:"outline-it"},"Login Portal")),r.a.createElement(K.m,{align:"center",color:"textSecondary",variant:"h6"},"Sign Up Form"),r.a.createElement(K.l,{autoFocus:!0,type:"text",name:"email",value:t,label:"Email",onChange:this.handleChange,fullWidth:!0,variant:"outlined",margin:"dense"}),r.a.createElement(K.l,{type:"password",name:"password",value:n,label:"Password",onChange:this.handleChange,fullWidth:!0,variant:"outlined",margin:"dense"}),r.a.createElement(K.l,{type:"password",name:"confirmPassword",value:a,label:"Confirm Password",onChange:this.handleChange,fullWidth:!0,variant:"outlined",margin:"dense"}),r.a.createElement(K.l,{type:"text",name:"mobile",value:o,label:"Mobile No.",onChange:this.handleChange,fullWidth:!0,variant:"outlined",margin:"dense",style:{marginBottom:15},helperText:"example: 0300-1234567"}),r.a.createElement(K.l,{type:"date",name:"dob",value:i,label:"Date of Birth",InputLabelProps:{shrink:!0},onChange:this.handleChange,fullWidth:!0,variant:"outlined",margin:"dense"}),r.a.createElement(K.l,{type:"text",name:"first",value:l,label:"First Name",onChange:this.handleChange,fullWidth:!0,variant:"outlined",margin:"dense"}),r.a.createElement(K.l,{type:"text",name:"last",value:c,label:"Last Name",onChange:this.handleChange,fullWidth:!0,variant:"outlined",margin:"dense"}),r.a.createElement(se,{range:["Male","Female"],theLabel:"Gender",criteria:"gender",theField:s,toChange:this.handleChange}),r.a.createElement(se,{range:["Married","Single"],theLabel:"Marital Status",criteria:"maritalStatus",theField:d,toChange:this.handleChange}),r.a.createElement(K.l,{type:"text",name:"cnic",value:u,label:"CNIC",onChange:this.handleChange,fullWidth:!0,variant:"outlined",margin:"dense",style:{marginBottom:15},helperText:"example: 12345-1234567-8"}),r.a.createElement(K.a,{variant:"contained",fullWidth:!0,children:"Sign Up",color:"primary",size:"large",onClick:this.onSignUpHandler}),r.a.createElement("hr",null),r.a.createElement("div",{className:"ask-signup"},r.a.createElement(K.m,{align:"center",children:"Already have an Account ? ",color:"textSecondary"}),r.a.createElement(K.a,{variant:"outlined",children:"Sign In Now",color:"secondary",size:"medium",onClick:this.gotoSignIn}))))}}]),t}(a.Component),de=Object(l.b)(function(e){return{store:e}},function(e){return{signUp:function(t){return e(S.signUp(t))},onSnackHandler:function(t,n){return e(S.onSnackHandler({snack:t,message:n}))}}})(ue),pe=n(685),Ee=function(e){function t(){return Object(B.a)(this,t),Object(Y.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark"},r.a.createElement(pe.a,{to:"/dashboard",className:"navbar-brand",children:"Dashboard"}),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarsExample09","aria-controls":"navbarsExample09","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarsExample09"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement(pe.a,{to:"/dashboard",children:"Main",id:"dropdown09",className:"nav-link active dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdown09"},r.a.createElement(pe.a,{to:"/dashboard/product",children:"Product",className:"dropdown-item"}),r.a.createElement(pe.a,{to:"/dashboard/vendor",children:"Vendor",className:"dropdown-item"}),r.a.createElement(pe.a,{to:"/dashboard/client",children:"Client",className:"dropdown-item"}))),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement(pe.a,{to:"/dashboard",children:"Transaction",id:"dropdown09",className:"nav-link active dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),r.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"dropdown09"},r.a.createElement(pe.a,{to:"/dashboard/purchase",children:"Purchase Book",className:"dropdown-item"}),r.a.createElement(pe.a,{to:"/dashboard/sale",children:"Sale Book",className:"dropdown-item"}),r.a.createElement(pe.a,{to:"/dashboard/payment",children:"Payment Book",className:"dropdown-item"}),r.a.createElement(pe.a,{to:"/dashboard/recovery",children:"Recovery Book",className:"dropdown-item"})))),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary my-2 my-sm-0",onClick:function(){return e.props.signOut()}},"Logout"))))}}]),t}(a.Component),me=Object(l.b)(null,function(e){return{signOut:function(){return e(S.signOut())}}})(Ee),fe=n(237),ve=new(n.n(fe).a)("f9126fc42e7cc112a924",{cluster:"ap2",forceTLS:!0}).subscribe("inventory"),he=n(40),be=n.n(he),Se=function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(Y.a)(this,Object(q.a)(t).call(this))).handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(function(){return Object(Q.a)({},a,r)})},e.renderSearchBlock=function(){var t=e.props,n=t.getRow,a=t.deleteProduct,o=t.store,i=e.state.search.toLowerCase(),l=o.products.filter(function(e){return-1!==e.productName.toLowerCase().indexOf(i)});return r.a.createElement(K.e,{elevation:24,className:"popout-block"},l.length?l.map(function(e,t){return r.a.createElement("ul",{className:"list-group",key:t},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(K.c,{size:"small",color:"primary","aria-label":"Edit",onClick:function(){return n(e._id)}},r.a.createElement(K.d,null,"edit_icon")),r.a.createElement(K.c,{size:"small",color:"secondary","aria-label":"Delete",onClick:function(){return a(e._id)}},r.a.createElement(be.a,null))),r.a.createElement("li",{className:"list-group-item"},"Product: ",e.productName),r.a.createElement("li",{className:"list-group-item"},"Manufacturer: ",e.manufacturer),r.a.createElement("li",{className:"list-group-item"},"Description: ",e.description))}):r.a.createElement("h4",{className:"simple-flex"},"Empty"))},e.state={search:""},e}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.state.search,t=this.props,n=t.isPopup,a=t.validateSearch;return r.a.createElement("div",{className:"simple-flex"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(K.l,{autoFocus:!0,type:"text",margin:"dense",variant:"standard",label:"Type Product Name...",name:"search",value:e,onChange:this.handleChange,onKeyDown:a})),r.a.createElement("div",null,n&&this.renderSearchBlock())))}}]),t}(a.Component),ge=Object(l.b)(function(e){return{store:e}},null)(Se),ye=function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(Y.a)(this,Object(q.a)(t).call(this))).handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(Q.a)({},a,r))},e.getRow=function(t){var n=e.props.store.products.find(function(e){return e._id===t}),a=n._id,r=n.productName,o=n.manufacturer,i=n.description;e.setState({_id:a,productName:r,manufacturer:o,description:i,editing:!0,isPopup:!1,isSearch:!1})},e.onSaveHandler=function(){var t=e.state,n=t._id,a=t.productName,r=t.manufacturer,o=t.description;return t.editing?e.props.updateProduct({_id:n,productName:a,manufacturer:r,description:o}):e.props.productSave({productName:a,manufacturer:r,description:o})},e.onBrowseHandler=function(){e.setState(function(e){return{isSearch:!e.isSearch}})},e.onClearHandler=function(){e.setState({_id:"",productName:"",manufacturer:"",description:"",editing:!1,isSearch:!1,isPopup:!1})},e.validateSearch=function(t){return 13===t.keyCode?e.setState({isPopup:!0}):27===t.keyCode?e.setState({isPopup:!1}):void 0},e.state={_id:"",productName:"",manufacturer:"",description:"",editing:!1,isPopup:!1,isSearch:!1},e}return Object(z.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){var e=this;ve.bind("products",function(){e.props.getProduct()})}},{key:"render",value:function(){var e=this.state,t=e.productName,n=e.manufacturer,a=e.description;return r.a.createElement("div",null,r.a.createElement(K.e,{elevation:24,className:"the-form"},r.a.createElement(K.m,{children:"Product Form",align:"center",color:"secondary",gutterBottom:!0,variant:"h5"}),r.a.createElement(K.l,{autoFocus:!0,type:"text",margin:"dense",label:"Product Name",name:"productName",value:t,onChange:this.handleChange,variant:"filled",fullWidth:!0}),r.a.createElement(K.l,{type:"text",margin:"dense",label:"Manufacturer",name:"manufacturer",value:n,onChange:this.handleChange,variant:"filled",fullWidth:!0}),r.a.createElement(K.l,{type:"text",margin:"dense",label:"Description",name:"description",value:a,onChange:this.handleChange,variant:"filled",fullWidth:!0}),r.a.createElement("div",{className:"buttons-group"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Basic example"},r.a.createElement("button",{className:this.state.editing?"btn btn-secondary":"btn btn-primary",onClick:this.onSaveHandler},this.state.editing?"Update":"Save"),r.a.createElement("button",{className:"btn btn-success",onClick:this.onBrowseHandler},"Browse"),r.a.createElement("button",{className:"btn btn-danger",onClick:this.onClearHandler},"Clear"))),this.state.isSearch&&r.a.createElement(ge,{getRow:this.getRow,isPopup:this.state.isPopup,validateSearch:this.validateSearch,deleteProduct:this.props.deleteProduct})))}}]),t}(a.Component),Ce=Object(l.b)(function(e){return{store:e}},function(e){return{productSave:function(t){return e(S.productSave(t))},updateProduct:function(t){return e(S.updateProduct(t))},getProduct:function(){return e(S.getProduct())},deleteProduct:function(t){return e(S.deleteProduct(t))}}})(ye),Oe=function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(Y.a)(this,Object(q.a)(t).call(this))).handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(Q.a)({},a,r))},e.renderSearchBlock=function(){var t=e.props,n=t.getRow,a=t.store,o=t.deleteVendor,i=e.state.search.toLowerCase(),l=a.vendors.filter(function(e){return-1!==e.vendorName.toLowerCase().indexOf(i)});return r.a.createElement(K.e,{elevation:24,className:"popout-block"},l.length?l.map(function(e,t){return r.a.createElement("ul",{className:"list-group",key:t},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(K.c,{size:"small",color:"primary","aria-label":"Edit",onClick:function(){return n(e._id)}},r.a.createElement(K.d,null,"edit_icon")),r.a.createElement(K.c,{size:"small",color:"secondary","aria-label":"Delete",onClick:function(){return o(e._id)}},r.a.createElement(be.a,null))),r.a.createElement("li",{className:"list-group-item"},"Vendor: ",e.vendorName),r.a.createElement("li",{className:"list-group-item"},"Address: ",e.address),r.a.createElement("li",{className:"list-group-item"},"Telephone: ",e.telephone),r.a.createElement("li",{className:"list-group-item"},"Email: ",e.email),r.a.createElement("li",{className:"list-group-item"},"NTN: ",e.ntn))}):r.a.createElement("h4",{className:"simple-flex"},"Empty"))},e.state={search:""},e}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.state.search,t=this.props,n=t.isPopup,a=t.validateSearch;return r.a.createElement("div",{className:"simple-flex"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(K.l,{autoFocus:!0,type:"text",margin:"dense",variant:"standard",label:"Type Vendor Name...",name:"search",value:e,onChange:this.handleChange,onKeyDown:a})),r.a.createElement("div",null,n&&this.renderSearchBlock())))}}]),t}(a.Component),Ne=Object(l.b)(function(e){return{store:e}},null)(Oe),Pe=function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(Y.a)(this,Object(q.a)(t).call(this))).handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(Q.a)({},a,r))},e.getRow=function(t){var n=e.props.store.vendors.find(function(e){return e._id===t}),a=n._id,r=n.vendorName,o=n.address,i=n.telephone,l=n.email,c=n.ntn;e.setState({editing:!0,_id:a,vendorName:r,address:o,telephone:i,email:l,ntn:c,isSearch:!1,isPopup:!1})},e.onSaveHandler=function(){var t=e.state,n=t._id,a=t.vendorName,r=t.address,o=t.telephone,i=t.email,l=t.ntn;return t.editing?e.props.updateVendor({_id:n,vendorName:a,address:r,telephone:o,email:i,ntn:l}):e.props.vendorSave({vendorName:a,address:r,telephone:o,email:i,ntn:l})},e.onBrowseHandler=function(){e.setState(function(e){return{isSearch:!e.isSearch}})},e.onClearHandler=function(){e.setState({_id:"",vendorName:"",address:"",telephone:"",email:"",ntn:"",editing:!1,isSearch:!1,isPopup:!1})},e.validateSearch=function(t){return 13===t.keyCode?e.setState({isPopup:!0}):27===t.keyCode?e.setState({isPopup:!1}):void 0},e.state={_id:"",vendorName:"",address:"",telephone:"",email:"",ntn:"",editing:!1,isSearch:!1,isPopup:!1},e}return Object(z.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){var e=this;ve.bind("vendors",function(){e.props.getVendor()})}},{key:"render",value:function(){var e=this.state,t=e.vendorName,n=e.address,a=e.telephone,o=e.email,i=e.ntn;return r.a.createElement("div",null,r.a.createElement(K.e,{elevation:24,className:"the-form"},r.a.createElement(K.m,{children:"Vendor Form",align:"center",color:"secondary",gutterBottom:!0,variant:"h5"}),r.a.createElement(K.l,{autoFocus:!0,type:"text",margin:"dense",label:"Vendor Name",name:"vendorName",value:t,onChange:this.handleChange,variant:"filled",fullWidth:!0}),r.a.createElement(K.l,{type:"text",margin:"dense",label:"Address",name:"address",value:n,onChange:this.handleChange,variant:"filled",fullWidth:!0}),r.a.createElement(K.l,{type:"text",margin:"dense",label:"Telephone",name:"telephone",value:a,onChange:this.handleChange,variant:"filled",fullWidth:!0}),r.a.createElement(K.l,{type:"text",margin:"dense",label:"Email Address",name:"email",value:o,onChange:this.handleChange,variant:"filled",fullWidth:!0}),r.a.createElement(K.l,{type:"text",margin:"dense",label:"National Tax Number",name:"ntn",value:i,onChange:this.handleChange,variant:"filled",fullWidth:!0}),r.a.createElement("div",{className:"buttons-group"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Basic example"},r.a.createElement("button",{className:this.state.editing?"btn btn-secondary":"btn btn-primary",onClick:this.onSaveHandler},this.state.editing?"Update":"Save"),r.a.createElement("button",{className:"btn btn-success",onClick:this.onBrowseHandler},"Browse"),r.a.createElement("button",{className:"btn btn-danger",onClick:this.onClearHandler},"Clear"))),this.state.isSearch&&r.a.createElement(Ne,{getRow:this.getRow,isPopup:this.state.isPopup,validateSearch:this.validateSearch,deleteVendor:this.props.deleteVendor})))}}]),t}(a.Component),Te=Object(l.b)(function(e){return{store:e}},function(e){return{vendorSave:function(t){return e(S.vendorSave(t))},updateVendor:function(t){return e(S.updateVendor(t))},getVendor:function(){return e(S.getVendor())},deleteVendor:function(t){return e(S.deleteVendor(t))}}})(Pe),Le=function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(Y.a)(this,Object(q.a)(t).call(this))).handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(Q.a)({},a,r))},e.renderSearchBlock=function(){var t=e.props,n=t.getRow,a=t.store,o=t.deleteClient,i=e.state.search.toLowerCase(),l=a.clients.filter(function(e){return-1!==e.clientName.toLowerCase().indexOf(i)});return r.a.createElement(K.e,{elevation:24,className:"popout-block"},l.length?l.map(function(e,t){return r.a.createElement("ul",{className:"list-group",key:t},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(K.c,{size:"small",color:"primary","aria-label":"Edit",onClick:function(){return n(e._id)}},r.a.createElement(K.d,null,"edit_icon")),r.a.createElement(K.c,{size:"small",color:"secondary","aria-label":"Delete",onClick:function(){return o(e._id)}},r.a.createElement(be.a,null))),r.a.createElement("li",{className:"list-group-item"},"Client: ",e.clientName),r.a.createElement("li",{className:"list-group-item"},"Address: ",e.address),r.a.createElement("li",{className:"list-group-item"},"Telephone: ",e.telephone),r.a.createElement("li",{className:"list-group-item"},"Email: ",e.email),r.a.createElement("li",{className:"list-group-item"},"NTN: ",e.ntn))}):r.a.createElement("h4",{className:"simple-flex"},"Empty"))},e.state={search:""},e}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.state.search,t=this.props,n=t.isPopup,a=t.validateSearch;return r.a.createElement("div",{className:"simple-flex"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(K.l,{autoFocus:!0,type:"text",margin:"dense",variant:"standard",label:"Type Client Name...",name:"search",value:e,onChange:this.handleChange,onKeyDown:a})),r.a.createElement("div",null,n&&this.renderSearchBlock())))}}]),t}(a.Component),Ae=Object(l.b)(function(e){return{store:e}},null)(Le),Re=function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(Y.a)(this,Object(q.a)(t).call(this))).handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(Q.a)({},a,r))},e.getRow=function(t){var n=e.props.store.clients.find(function(e){return e._id===t}),a=n._id,r=n.clientName,o=n.address,i=n.telephone,l=n.email,c=n.ntn;e.setState({editing:!0,_id:a,clientName:r,address:o,telephone:i,email:l,ntn:c,isPopup:!1,isSearch:!1})},e.onSaveHandler=function(){var t=e.state,n=t._id,a=t.clientName,r=t.address,o=t.telephone,i=t.email,l=t.ntn;return t.editing?e.props.updateClient({_id:n,clientName:a,address:r,telephone:o,email:i,ntn:l}):e.props.clientSave({clientName:a,address:r,telephone:o,email:i,ntn:l})},e.onBrowseHandler=function(){e.setState(function(e){return{isSearch:!e.isSearch}})},e.onClearHandler=function(){e.setState({_id:"",clientName:"",address:"",telephone:"",email:"",ntn:"",editing:!1,isSearch:!1,isPopup:!1})},e.validateSearch=function(t){return 13===t.keyCode?e.setState({isPopup:!0}):27===t.keyCode?e.setState({isPopup:!1}):void 0},e.state={_id:"",clientName:"",address:"",telephone:"",email:"",ntn:"",editing:!1,isSearch:!1,isPopup:!1},e}return Object(z.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){var e=this;ve.bind("clients",function(){e.props.getClient()})}},{key:"render",value:function(){var e=this.state,t=e.clientName,n=e.address,a=e.telephone,o=e.email,i=e.ntn;return r.a.createElement("div",null,r.a.createElement(K.e,{elevation:24,className:"the-form"},r.a.createElement(K.m,{children:"Client Form",align:"center",color:"secondary",gutterBottom:!0,variant:"h5"}),r.a.createElement(K.l,{autoFocus:!0,type:"text",margin:"dense",label:"Client Name",name:"clientName",value:t,onChange:this.handleChange,variant:"filled",fullWidth:!0}),r.a.createElement(K.l,{type:"text",margin:"dense",label:"Address",name:"address",value:n,onChange:this.handleChange,variant:"filled",fullWidth:!0}),r.a.createElement(K.l,{type:"text",margin:"dense",label:"Telephone",name:"telephone",value:a,onChange:this.handleChange,variant:"filled",fullWidth:!0}),r.a.createElement(K.l,{type:"text",margin:"dense",label:"Email Address",name:"email",value:o,onChange:this.handleChange,variant:"filled",fullWidth:!0}),r.a.createElement(K.l,{type:"text",margin:"dense",label:"National Tax Number",name:"ntn",value:i,onChange:this.handleChange,variant:"filled",fullWidth:!0}),r.a.createElement("div",{className:"buttons-group"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Basic example"},r.a.createElement("button",{className:this.state.editing?"btn btn-secondary":"btn btn-primary",onClick:this.onSaveHandler},this.state.editing?"Update":"Save"),r.a.createElement("button",{className:"btn btn-success",onClick:this.onBrowseHandler},"Browse"),r.a.createElement("button",{className:"btn btn-danger",onClick:this.onClearHandler},"Clear"))),this.state.isSearch&&r.a.createElement(Ae,{getRow:this.getRow,isPopup:this.state.isPopup,validateSearch:this.validateSearch,deleteClient:this.props.deleteClient})))}}]),t}(a.Component),Ue=Object(l.b)(function(e){return{store:e}},function(e){return{clientSave:function(t){return e(S.clientSave(t))},updateClient:function(t){return e(S.updateClient(t))},getClient:function(){return e(S.getClient())},deleteClient:function(t){return e(S.deleteClient(t))}}})(Re),Ie=n(26),je=n(77),De=n.n(je),Fe=function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(Y.a)(this,Object(q.a)(t).call(this))).renderSearchBlock=function(){var t=e.props,n=t.getPurchaseFields,a=t.store,o=t.onDelete,i=e.state.search.toLowerCase(),l=a.purchases.filter(function(e){return-1!==e.invoice.toLowerCase().indexOf(i)});return r.a.createElement(K.e,{elevation:24,className:"popout-block"},l.length?l.map(function(e,t){return r.a.createElement("ul",{className:"list-group",key:t},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(K.c,{size:"small",color:"primary","aria-label":"Edit",onClick:function(){return n(e._id)}},r.a.createElement(K.d,null,"edit_icon")),r.a.createElement(K.c,{size:"small",color:"secondary","aria-label":"Delete",onClick:function(){return o(e._id)}},r.a.createElement(be.a,null))),r.a.createElement("li",{className:"list-group-item"},"Date: ",e.date.slice(0,10)),r.a.createElement("li",{className:"list-group-item"},"Invoice: ",e.invoice),r.a.createElement("li",{className:"list-group-item"},"Vendor: ",e.vendorId.vendorName))}):r.a.createElement("h4",{className:"simple-flex"},"Empty"))},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(Q.a)({},a,r))},e.state={search:""},e}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.getPur,a=e.validateSearch,o=this.state.search;return r.a.createElement("div",{className:"simple-flex"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(K.l,{autoFocus:!0,type:"text",margin:"dense",variant:"standard",label:"Type Invoice #",name:"search",value:o,onChange:this.handleChange,onKeyDown:a})),r.a.createElement("div",null,t&&n&&this.renderSearchBlock())))}}]),t}(a.Component),ke=Object(l.b)(function(e){return{store:e}},null)(Fe),we=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(Y.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(o)))).renderSearchBlockVendor=function(){var e=n.props,t=e.vendorName,a=e.store,o=e.getVendorFields,i=t.toLowerCase(),l=a.vendors.filter(function(e){return-1!==e.vendorName.toLowerCase().indexOf(i)});return r.a.createElement(K.e,{elevation:24,className:"popout-block"},l.length?l.map(function(e,t){return r.a.createElement("ul",{className:"list-group",key:t},r.a.createElement("li",{className:"list-group-item"},r.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return o(e._id,e.vendorName)}},e.vendorName)),r.a.createElement("li",{className:"list-group-item"},"Address: ",e.address),r.a.createElement("li",{className:"list-group-item"},"Telephone: ",e.telephone),r.a.createElement("li",{className:"list-group-item"},"Email: ",e.email),r.a.createElement("li",{className:"list-group-item"},"NTN: ",e.ntn))}):r.a.createElement("h4",{className:"simple-flex"},"Empty"))},n}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.props,t=e.vendorName,n=e.validateVendor,a=e.vendorList,o=e.handleChange;return r.a.createElement("div",null,r.a.createElement(K.l,{type:"text",margin:"dense",variant:"standard",label:"Vendor",name:"vendorName",value:t,onChange:o,onKeyDown:n}),a&&this.renderSearchBlockVendor())}}]),t}(a.Component),Ve=Object(l.b)(function(e){return{store:e}},null)(we),xe=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(Y.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(o)))).renderSearchBlockProduct=function(){var e=n.props,t=e.productName,a=e.getProductFields,o=e.store,i=t.toLowerCase(),l=o.products.filter(function(e){return-1!==e.productName.toLowerCase().indexOf(i)});return r.a.createElement(K.e,{elevation:24,className:"popout-block"},l.length?l.map(function(e,t){return r.a.createElement("ul",{className:"list-group",key:t},r.a.createElement("li",{className:"list-group-item"},r.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return a(e._id,e.productName)}},e.productName)),r.a.createElement("li",{className:"list-group-item"},"Manufacturer: ",e.manufacturer),r.a.createElement("li",{className:"list-group-item"},"Description: ",e.description))}):r.a.createElement("h4",{className:"simple-flex"},"Empty"))},n}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.props,t=e.productName,n=e.ind,a=e.inputProducts,o=e.handleChangeTab,i=e.validateProduct,l=e.vendorList;return r.a.createElement("div",null,r.a.createElement(K.l,{type:"text",variant:"standard",name:"productName",value:t,onChange:function(e){return o(e,n)},onKeyDown:function(e){return i(e,n)}}),!l&&a[n].productList&&this.renderSearchBlockProduct())}}]),t}(a.Component),Ge=Object(l.b)(function(e){return{store:e}},null)(xe),He=Object(Z.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white,textAlign:"center",padding:5},body:{fontSize:13,padding:5},footer:{fontSize:16,padding:5}}})(K.h),_e=function(){var e=new Date,t="2019-";return t+=e.getMonth()<9?"0"+(e.getMonth()+1)+"-":e.getMonth()+"-",t+=e.getDate()<10?"0"+(e.getDate()+1):e.getDate()},Be=function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(Y.a)(this,Object(q.a)(t).call(this))).componentDidMount=function(){e.getRefNo(),ve.bind("sales",function(){e.props.getSale()}),ve.bind("purchases",function(){e.props.getPurchase()}),ve.bind("products",function(){e.props.getProduct()}),ve.bind("vendors",function(){e.props.getVendor()})},e.getRefNo=function(){var t=e.props.store.purchases,n=e.state.editing,a=_e();if(t.length&&!n){var r=[];for(var o in t)r.push(t[o].invoice);var i=Math.max.apply(Math,r)+1;return e.setState({invoice:i,date:a})}return e.setState({invoice:1,date:a})},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(Q.a)({},a,r))},e.handleChangeTab=function(t,n){var a=t.target,r=a.name,o=a.value,i=Object(Ie.a)(e.state.inputProducts);"quantity"===r||"costPrice"===r?(i[n][r]=o,e.calcValue(n)):i[n][r]=o,e.setState({inputProducts:i})},e.calcValue=function(t){var n=Object(Ie.a)(e.state.inputProducts);n[t].value=n[t].quantity*n[t].costPrice,e.setState({inputProducts:n})},e.onSaveHandler=function(){var t=e.state,n=t._id,a=t.date,r=t.invoice,o=t.vendorId,i=t.inputProducts;return t.editing?e.props.updatePurchase({_id:n,date:a,invoice:r,vendorId:o,products:i}):e.props.purchaseSave({date:a,invoice:r,vendorId:o,products:i})},e.onBrowseHandler=function(){e.setState(function(e){return{options:!e.options}})},e.onClearHandler=function(){e.setState({_id:"",date:"",invoice:"",vendorId:"",vendorName:"",inputProducts:[{productId:"",productName:"",quantity:"0",costPrice:"0",value:"0",sellingPrice:""}],options:!1,editing:!1}),e.getRefNo()},e.onAddRow=function(){var t=Object(Ie.a)(e.state.inputProducts),n=[];return t.forEach(function(e){n.push(Object.values(e).every(function(e){return!1===e||Boolean(e)}))}),n.every(function(e){return Boolean(e)})?(t.push({productId:"",productName:"",quantity:"0",costPrice:"0",value:"0",sellingPrice:"0",productList:!1}),e.setState({inputProducts:t})):e.props.onSnackHandler(!0,"Please fill previous row first")},e.checkStock=function(){var t=e.props.store,n=t.purchases,a=t.sales,r=t.products,o={};return r.forEach(function(e){return o[e._id]=0}),n.forEach(function(e){return e.products.forEach(function(e){return o[e.productId._id]+=e.quantity})}),a.forEach(function(e){return e.products.forEach(function(e){return o[e.productId._id]-=e.quantity})}),o},e.checkQty=function(t){var n=Object(Ie.a)(e.state.inputProducts),a=e.props.store.products;if(e.state.editing){var r=e.checkStock();if(n[t].oldProductId){if(n[t].oldProductId===n[t].productId){var o=+r[n[t].oldProductId]-+n[t].oldQuantity+ +n[t].quantity;if(o<0){var i=a.find(function(e){return e._id===n[t].oldProductId}).productName;n[t].err="".concat(i," will be negative by ").concat(o)}else n[t].err=!1;e.setState({inputProducts:n})}}else{var l=+r[n[t].oldProductId]-+n[t].oldQuantity;if(l<0){var c=a.find(function(e){return e._id===n[t].oldProductId}).productName;n[t].err="".concat(c," will be negative by ").concat(l)}else n[t].err=!1;e.setState({inputProducts:n})}}},e.onRemoveRow=function(t){var n=Object(Ie.a)(e.state.inputProducts),a=e.props.store.products;if(e.state.editing){var r=e.checkStock();if(n[t].oldProductId){var o=+r[n[t].oldProductId]-+n[t].oldQuantity;if(o<0){var i=a.find(function(e){return e._id===n[t].oldProductId}).productName;n[t].err="".concat(i," will be negative by ").concat(o),e.setState({inputProducts:n})}else e.onDeleteRow(t)}else e.onDeleteRow(t)}else e.onDeleteRow(t)},e.onDeleteRow=function(t){var n=Object(Ie.a)(e.state.inputProducts);n.length>1?(n[t].productList=!1,n.splice(t,1),e.setState({inputProducts:n})):e.setState({inputProducts:[{productId:"",productName:"",quantity:"0",costPrice:"0",value:"0",sellingPrice:"0",productList:!1}]})},e.validateSearch=function(t){return 13===t.keyCode?e.setState({getPur:!0}):27===t.keyCode?e.setState({getPur:!1}):void 0},e.getPurchaseFields=function(t){var n=e.props.store.purchases.find(function(e){return e._id===t}),a=n._id,r=n.date,o=n.invoice,i=n.vendorId,l=n.products;e.setState({_id:a,date:r.slice(0,10),invoice:o,vendorId:i._id,vendorName:i.vendorName,inputProducts:l.map(function(e){return{_id:e._id,productId:e.productId._id,oldProductId:e.productId._id,productName:e.productId.productName,quantity:e.quantity,oldQuantity:e.quantity,costPrice:e.costPrice,value:e.value,sellingPrice:e.sellingPrice}}),editing:!0,getPur:!1,options:!1})},e.validateVendor=function(t){return 13===t.keyCode?e.setState({vendorList:!0}):27===t.keyCode?e.setState({vendorList:!1}):void 0},e.getVendorFields=function(t,n){e.setState({vendorId:t,vendorName:n,vendorList:!1})},e.validateProduct=function(t,n){var a=Object(Ie.a)(e.state.inputProducts);13===t.keyCode&&(a[n].productList=!0),27===t.keyCode&&(a[n].productList=!1),e.setState({ind:n,inputProducts:a})},e.getProductFields=function(t,n){var a=Object(Ie.a)(e.state.inputProducts),r=e.state.ind;a.forEach(function(t,a){if(a!==r&&t.productName===n)return e.props.onSnackHandler(!0,"can't enter same product")}),a[r].productId=t,a[r].productName=n,a[r].productList=!1,e.setState({inputProducts:a})},e.state={_id:"",date:"",invoice:"",vendorId:"",vendorName:"",inputProducts:[{productId:"",productName:"",quantity:"0",costPrice:"0",value:"0",sellingPrice:"0",productList:!1}],editing:!1,vendorList:!1,search:"",options:!1,getPur:!1},e}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.date,a=t.invoice,o=t.vendorName,i=t.inputProducts,l=t.editing,c=this.props.classes;return r.a.createElement("div",null,r.a.createElement(K.e,{elevation:24,className:"pb-form"},r.a.createElement(K.m,{children:"Purchase Form",align:"center",color:"secondary",gutterBottom:!0,variant:"h5"}),r.a.createElement(K.l,{autoFocus:!0,type:"date",margin:"dense",InputLabelProps:{shrink:!0},label:"Date",variant:"standard",name:"date",value:n,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement(K.l,{disabled:!0,type:"text",margin:"dense",label:"Invoice",variant:"standard",name:"invoice",value:a,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement(Ve,{vendorName:o,handleChange:this.handleChange,validateVendor:this.validateVendor,vendorList:this.state.vendorList,getVendorFields:this.getVendorFields}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement(K.f,{className:c.table},r.a.createElement(K.j,null,r.a.createElement(K.k,null,r.a.createElement(He,null,"Product"),r.a.createElement(He,null,"Quantity"),r.a.createElement(He,null,"Cost"),r.a.createElement(He,null,"Value"),r.a.createElement(He,null,"Selling"),r.a.createElement(He,{style:{padding:3}},"x"))),r.a.createElement(K.g,null,i.map(function(t,n){return r.a.createElement(K.k,{className:c.row,key:n},r.a.createElement(He,null,r.a.createElement(Ge,{getProductFields:e.getProductFields,productName:t.productName,ind:n,inputProducts:i,handleChangeTab:e.handleChangeTab,validateProduct:e.validateProduct,vendorList:e.state.vendorList})),r.a.createElement(He,null,r.a.createElement(K.l,{type:"text",variant:"standard",name:"quantity",value:t.quantity,onBlur:function(){return e.checkQty(n)},onChange:function(t){return e.handleChangeTab(t,n)}})),r.a.createElement(He,null,r.a.createElement(K.l,{type:"text",variant:"standard",name:"costPrice",value:t.costPrice,onChange:function(t){return e.handleChangeTab(t,n)}})),r.a.createElement(He,null,r.a.createElement(K.l,{disabled:!0,type:"text",variant:"standard",name:"value",error:Boolean(t.err),helperText:t.err&&t.err,value:parseInt(t.value).toLocaleString(),onChange:function(t){return e.handleChangeTab(t,n)}})),r.a.createElement(He,null,r.a.createElement(K.l,{type:"text",variant:"standard",name:"sellingPrice",value:t.sellingPrice,onChange:function(t){return e.handleChangeTab(t,n)}})),r.a.createElement(He,{style:{padding:3}},r.a.createElement(K.c,{size:"small",color:"secondary","aria-label":"Delete",className:c.fab,onClick:function(){return e.onRemoveRow(n)}},r.a.createElement(be.a,null))))})),r.a.createElement(K.i,null,r.a.createElement(K.k,{className:c.row},r.a.createElement(He,null,"Total"),r.a.createElement(He,null,i.reduce(function(e,t){return parseInt(e)+parseInt(t.quantity)},0).toLocaleString()),r.a.createElement(He,null),r.a.createElement(He,null,i.reduce(function(e,t){return parseInt(e)+parseInt(t.value)},0).toLocaleString()),r.a.createElement(He,null)))))),r.a.createElement(K.c,{size:"small",color:"primary","aria-label":"Add",onClick:this.onAddRow},r.a.createElement(De.a,null)),r.a.createElement("div",{className:"buttons-group"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Basic example"},r.a.createElement("button",{className:l?"btn btn-secondary":"btn btn-primary",onClick:this.onSaveHandler},l?"Update":"Save"),r.a.createElement("button",{className:"btn btn-success",onClick:this.onBrowseHandler},"Browse"),r.a.createElement("button",{className:"btn btn-danger",onClick:this.onClearHandler},"Clear"))),this.state.options&&r.a.createElement(ke,{options:this.state.options,getPur:this.state.getPur,validateSearch:this.validateSearch,getPurchaseFields:this.getPurchaseFields,onDelete:this.props.deletePurchase})))}}]),t}(a.Component);Be.getDerivedStateFromProps=function(e,t){var n=e.store.purchases,a=_e();if(n.length&&!t.editing){var r=[];for(var o in n)r.push(n[o].invoice);var i=Math.max.apply(Math,r)+1;return i!==t.invoice?{invoice:i,date:a}:null}return null};var Me=Object(l.b)(function(e){return{store:e}},function(e){return{onSnackHandler:function(t,n){return e(S.onSnackHandler({snack:t,message:n}))},getVendor:function(){return e(S.getVendor())},getProduct:function(){return e(S.getProduct())},purchaseSave:function(t){return e(S.purchaseSave(t))},getPurchase:function(){return e(S.getPurchase())},updatePurchase:function(t){return e(S.updatePurchase(t))},deletePurchase:function(t){return e(S.deletePurchase(t))},getSale:function(){return e(S.getSale())}}})(Object(Z.withStyles)(function(e){return{root:{width:"100%",padding:5,marginTop:e.spacing.unit,overflowX:"auto"},table:{minWidth:"fit-content"},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}},fab:{margin:e.spacing.unit},formControl:{minWidth:200}}})(Be)),Ye=function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(Y.a)(this,Object(q.a)(t).call(this))).renderSearchBlock=function(){var t=e.props,n=t.getSaleFields,a=t.onDelete,o=t.store,i=e.state.search.toLowerCase(),l=o.sales.filter(function(e){return-1!==e.invoice.toLowerCase().indexOf(i)});return r.a.createElement(K.e,{elevation:24,className:"popout-block"},l.length?l.map(function(e,t){return r.a.createElement("ul",{className:"list-group",key:t},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(K.c,{size:"small",color:"primary","aria-label":"Edit",onClick:function(){return n(e._id)}},r.a.createElement(K.d,null,"edit_icon")),r.a.createElement(K.c,{size:"small",color:"secondary","aria-label":"Delete",onClick:function(){return a(e._id)}},r.a.createElement(be.a,null))),r.a.createElement("li",{className:"list-group-item"},"Date: ",e.date.slice(0,10)),r.a.createElement("li",{className:"list-group-item"},"Invoice: ",e.invoice),r.a.createElement("li",{className:"list-group-item"},"Client: ",e.clientId.clientName))}):r.a.createElement("h4",{className:"simple-flex"},"Empty"))},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(Q.a)({},a,r))},e.state={search:""},e}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.getSal,a=e.validateSearch,o=this.state.search;return r.a.createElement("div",{className:"simple-flex"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(K.l,{autoFocus:!0,type:"text",margin:"dense",variant:"standard",label:"Type Invoice #",name:"search",value:o,onChange:this.handleChange,onKeyDown:a})),r.a.createElement("div",null,t&&n&&this.renderSearchBlock())))}}]),t}(a.Component),qe=Object(l.b)(function(e){return{store:e}},null)(Ye),ze=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(Y.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(o)))).renderSearchBlockClient=function(){var e=n.props,t=e.clientName,a=e.store,o=e.getClientFields,i=t.toLowerCase(),l=a.clients.filter(function(e){return-1!==e.clientName.toLowerCase().indexOf(i)});return r.a.createElement(K.e,{elevation:24,className:"popout-block"},l.length?l.map(function(e,t){return r.a.createElement("ul",{className:"list-group",key:t},r.a.createElement("li",{className:"list-group-item"},r.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return o(e._id,e.clientName)}},e.clientName)),r.a.createElement("li",{className:"list-group-item"},"Address: ",e.address),r.a.createElement("li",{className:"list-group-item"},"Telephone: ",e.telephone),r.a.createElement("li",{className:"list-group-item"},"Email: ",e.email),r.a.createElement("li",{className:"list-group-item"},"NTN: ",e.ntn))}):r.a.createElement("h4",{className:"simple-flex"},"Empty"))},n}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.props,t=e.clientName,n=e.validateClient,a=e.clientList,o=e.handleChange;return r.a.createElement("div",null,r.a.createElement(K.l,{type:"text",margin:"dense",variant:"standard",label:"Client",name:"clientName",value:t,onChange:o,onKeyDown:n}),a&&this.renderSearchBlockClient())}}]),t}(a.Component),We=Object(l.b)(function(e){return{store:e}},null)(ze),Xe=Object(Z.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white,textAlign:"center",padding:5},body:{fontSize:13,padding:5},footer:{fontSize:16,padding:5}}})(K.h),Ke=function(){var e=new Date,t="2019-";return t+=e.getMonth()<9?"0"+(e.getMonth()+1)+"-":e.getMonth()+"-",t+=e.getDate()<10?"0"+(e.getDate()+1):e.getDate()},Qe=function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(Y.a)(this,Object(q.a)(t).call(this))).componentDidMount=function(){e.getRefNo(),ve.bind("sales",function(){e.props.getSale()}),ve.bind("purchases",function(){e.props.getPurchase()}),ve.bind("products",function(){e.props.getProduct()}),ve.bind("clients",function(){e.props.getClient()})},e.getRefNo=function(){var t=e.props.store.sales,n=Ke();if(t.length){var a=[];for(var r in t)a.push(t[r].invoice);var o=Math.max.apply(Math,a)+1;return e.setState({invoice:o,date:n})}return e.setState({invoice:1,date:n})},e.onClearHandler=function(){e.setState({_id:"",date:"",invoice:"",clientId:"",clientName:"",inputProducts:[{productId:"",productName:"",quantity:"0",sellingPrice:"0",value:"0",productList:!1,err:!1}],editing:!1,clientList:!1,search:"",options:!1,getSal:!1}),e.getRefNo()},e.onAddRow=function(){var t=Object(Ie.a)(e.state.inputProducts),n=[];return t.forEach(function(e){return n.push(Object.values(e).every(function(e){return!1===e||Boolean(e)}))}),n.every(function(e){return Boolean(e)})?(t.push({productId:"",productName:"",quantity:"0",sellingPrice:"0",value:"0",productList:!1}),e.setState({inputProducts:t})):e.props.onSnackHandler(!0,"Please fill previous row(s) first")},e.onRemoveRow=function(t){var n=Object(Ie.a)(e.state.inputProducts);return n.length>1?(n[t].productList=!1,n.splice(t,1),e.setState({inputProducts:n})):e.setState({inputProducts:[{productId:"",productName:"",quantity:"0",sellingPrice:"0",value:"0",productList:!1}]})},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(Q.a)({},a,r))},e.handleChangeTab=function(t,n){var a=t.target,r=a.name,o=a.value,i=Object(Ie.a)(e.state.inputProducts);"quantity"===r||"sellingPrice"===r?(i[n][r]=o,e.calcValue(n)):i[n][r]=o,e.setState({inputProducts:i})},e.calcValue=function(t){var n=Object(Ie.a)(e.state.inputProducts);n[t].value=n[t].quantity*n[t].sellingPrice,e.setState({inputProducts:n})},e.onSaveHandler=function(){var t=e.state,n=t._id,a=t.date,r=t.invoice,o=t.clientId,i=t.inputProducts;return t.editing?e.props.updateSale({_id:n,date:a,invoice:r,clientId:o,products:i}):e.props.saleSave({date:a,invoice:r,clientId:o,products:i})},e.onBrowseHandler=function(){e.setState(function(e){return{options:!e.options}})},e.validateSearch=function(t){return 13===t.keyCode?e.setState({getSal:!0}):27===t.keyCode?e.setState({getSal:!1}):void 0},e.getSaleFields=function(t){var n=e.props.store.sales.find(function(e){return e._id===t}),a=n._id,r=n.date,o=n.invoice,i=n.clientId,l=n.products;e.setState({_id:a,date:r.slice(0,10),invoice:o,clientId:i._id,clientName:i.clientName,inputProducts:l.map(function(e){return{productId:e.productId._id,productName:e.productId.productName,quantity:e.quantity,sellingPrice:e.sellingPrice,value:e.value,oldProductId:e.productId._id,oldQuantity:e.quantity}}),editing:!0,options:!1,getSal:!1})},e.validateClient=function(t){return 13===t.keyCode?e.setState({clientList:!0}):27===t.keyCode?e.setState({clientList:!1}):void 0},e.getClientFields=function(t,n){e.setState({clientId:t,clientName:n,clientList:!1})},e.validateProduct=function(t,n){var a=Object(Ie.a)(e.state.inputProducts);13===t.keyCode&&(a[n].productList=!0),27===t.keyCode&&(a[n].productList=!1),e.setState({ind:n,inputProducts:a})},e.getProductFields=function(t,n){var a=Object(Ie.a)(e.state.inputProducts),r=e.state.ind;a.forEach(function(t,a){if(a!==r&&t.productName===n)return e.props.onSnackHandler(!0,"can't enter same product (".concat(n,") again"))}),a[r].productId=t,a[r].productName=n,a[r].productList=!1,e.setState({inputProducts:a})},e.checkStock=function(){var t=e.props.store,n=t.purchases,a=t.sales,r=t.products,o={};return r.forEach(function(e){return o[e._id]=0}),n.forEach(function(e){return e.products.forEach(function(e){return o[e.productId._id]+=e.quantity})}),a.forEach(function(e){return e.products.forEach(function(e){return o[e.productId._id]-=e.quantity})}),o},e.checkQty=function(t){var n=Object(Ie.a)(e.state.inputProducts),a=e.props.store.products,r=e.checkStock();if(e.state.editing){if(n[t].oldProductId&&n[t].oldProductId===n[t].productId){var o=+r[n[t].oldProductId]+ +n[t].oldQuantity-+n[t].quantity;if(o<0){var i=a.find(function(e){return e._id===n[t].oldProductId}).productName;n[t].err="".concat(i," will be negative by ").concat(o)}else n[t].err=!1;e.setState({inputProducts:n})}}else{var l=r[n[t].productId]-+n[t].quantity,c=e.props.store.purchases;if(l<0){n[t].err="".concat(n[t].productName," will be negative by ").concat(l);var s={match:!1};c.forEach(function(e){e.products.forEach(function(e){e.productId._id===n[t].productId&&(s.match=!0,s.sellingPrice=e.sellingPrice)})}),s.match?n[t].sellingPrice=s.sellingPrice:n[t].sellingPrice=0}else n[t].err=!1,c.forEach(function(e){e.products.forEach(function(e){e.productId._id===n[t].productId&&(n[t].sellingPrice=e.sellingPrice)})});e.setState({inputProducts:n})}},e.state={_id:"",date:"",invoice:"",clientId:"",clientName:"",inputProducts:[{productId:"",productName:"",quantity:"0",sellingPrice:"0",value:"0",productList:!1,err:!1}],editing:!1,clientList:!1,search:"",options:!1,getSal:!1},e}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.date,a=t.invoice,o=t.clientName,i=t.inputProducts,l=t.editing,c=this.props.classes;return r.a.createElement("div",null,r.a.createElement(K.e,{elevation:24,className:"pb-form"},r.a.createElement(K.m,{children:"Sale Form",align:"center",color:"secondary",gutterBottom:!0,variant:"h5"}),r.a.createElement(K.l,{autoFocus:!0,type:"date",margin:"dense",InputLabelProps:{shrink:!0},label:"Date",variant:"standard",name:"date",value:n,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement(K.l,{disabled:!0,type:"text",margin:"dense",label:"Invoice",variant:"standard",name:"invoice",value:a,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement(We,{clientName:o,handleChange:this.handleChange,validateClient:this.validateClient,clientList:this.state.clientList,getClientFields:this.getClientFields}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement(K.f,{className:c.table},r.a.createElement(K.j,null,r.a.createElement(K.k,null,r.a.createElement(Xe,null,"Product"),r.a.createElement(Xe,null,"Quantity"),r.a.createElement(Xe,null,"Selling"),r.a.createElement(Xe,null,"Value"),r.a.createElement(Xe,{style:{padding:3}},"x"))),r.a.createElement(K.g,null,i.map(function(t,n){return r.a.createElement(K.k,{className:c.row,key:n},r.a.createElement(Xe,null,r.a.createElement(Ge,{getProductFields:e.getProductFields,productName:t.productName,ind:n,inputProducts:i,handleChangeTab:e.handleChangeTab,validateProduct:e.validateProduct,clientList:e.state.clientList})),r.a.createElement(Xe,null,r.a.createElement(K.l,{type:"text",variant:"standard",name:"quantity",value:t.quantity,onBlur:function(){return e.checkQty(n)},onChange:function(t){return e.handleChangeTab(t,n)}})),r.a.createElement(Xe,null,r.a.createElement(K.l,{type:"text",variant:"standard",name:"sellingPrice",value:t.sellingPrice,onFocus:function(){return e.calcValue(n)},onChange:function(t){return e.handleChangeTab(t,n)}})),r.a.createElement(Xe,null,r.a.createElement(K.l,{disabled:!0,type:"text",variant:"standard",name:"value",error:Boolean(t.err),helperText:t.err&&t.err,value:parseInt(t.value).toLocaleString(),onChange:function(t){return e.handleChangeTab(t,n)}})),r.a.createElement(Xe,{style:{padding:3}},r.a.createElement(K.c,{size:"small",color:"secondary","aria-label":"Delete",className:c.fab,onClick:function(){return e.onRemoveRow(n)}},r.a.createElement(be.a,null))))})),r.a.createElement(K.i,null,r.a.createElement(K.k,{className:c.row},r.a.createElement(Xe,null,"Total"),r.a.createElement(Xe,null,i.reduce(function(e,t){return parseInt(e)+parseInt(t.quantity)},0).toLocaleString()),r.a.createElement(Xe,null),r.a.createElement(Xe,null,i.reduce(function(e,t){return parseInt(e)+parseInt(t.value)},0).toLocaleString()),r.a.createElement(Xe,null)))))),r.a.createElement(K.c,{size:"small",color:"primary","aria-label":"Add",onClick:this.onAddRow},r.a.createElement(De.a,null)),r.a.createElement("div",{className:"buttons-group"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Basic example"},r.a.createElement("button",{className:l?"btn btn-secondary":"btn btn-primary",onClick:this.onSaveHandler},l?"Update":"Save"),r.a.createElement("button",{className:"btn btn-success",onClick:this.onBrowseHandler},"Browse"),r.a.createElement("button",{className:"btn btn-danger",onClick:this.onClearHandler},"Clear"))),this.state.options&&r.a.createElement(qe,{options:this.state.options,getSal:this.state.getSal,validateSearch:this.validateSearch,getSaleFields:this.getSaleFields,onDelete:this.props.deleteSale})))}}]),t}(a.Component);Qe.getDerivedStateFromProps=function(e,t){var n=e.store.sales,a=Ke();if(n.length&&!t.editing){var r=[];for(var o in n)r.push(n[o].invoice);var i=Math.max.apply(Math,r)+1;return i!==t.invoice?{invoice:i,date:a}:null}return null};var Je=Object(l.b)(function(e){return{store:e}},function(e){return{onSnackHandler:function(t,n){return e(S.onSnackHandler({snack:t,message:n}))},getClient:function(){return e(S.getClient())},getProduct:function(){return e(S.getProduct())},saleSave:function(t){return e(S.saleSave(t))},updateSale:function(t){return e(S.updateSale(t))},getSale:function(){return e(S.getSale())},deleteSale:function(t){return e(S.deleteSale(t))},getPurchase:function(){return e(S.getPurchase())}}})(Object(Z.withStyles)(function(e){return{root:{width:"100%",padding:5,marginTop:e.spacing.unit,overflowX:"auto"},table:{minWidth:"fit-content"},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}},fab:{margin:e.spacing.unit},formControl:{minWidth:200}}})(Qe)),$e=function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(Y.a)(this,Object(q.a)(t).call(this))).renderSearchBlock=function(){var t=e.props,n=t.getPaymentFields,a=t.onDelete,o=t.store,i=e.state.search.toLowerCase(),l=o.payments.filter(function(e){return-1!==e.refNo.toLowerCase().indexOf(i)});return r.a.createElement(K.e,{elevation:24,className:"popout-block"},l.length?l.map(function(e,t){return r.a.createElement("ul",{className:"list-group",key:t},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(K.c,{size:"small",color:"primary","aria-label":"Edit",onClick:function(){return n(e._id)}},r.a.createElement(K.d,null,"edit_icon")),r.a.createElement(K.c,{size:"small",color:"secondary","aria-label":"Delete",onClick:function(){return a(e._id)}},r.a.createElement(be.a,null))),r.a.createElement("li",{className:"list-group-item"},"Date: ",e.date.slice(0,10)),r.a.createElement("li",{className:"list-group-item"},"Reference: ",e.refNo),r.a.createElement("li",{className:"list-group-item"},"Vendor: ",e.vendorId.vendorName))}):r.a.createElement("h4",{className:"simple-flex"},"Empty"))},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(Q.a)({},a,r))},e.state={search:""},e}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.getEntry,a=e.validateSearch,o=this.state.search;return r.a.createElement("div",{className:"simple-flex"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(K.l,{autoFocus:!0,type:"text",margin:"dense",variant:"standard",label:"Type reference #",name:"search",value:o,onChange:this.handleChange,onKeyDown:a})),r.a.createElement("div",null,t&&n&&this.renderSearchBlock())))}}]),t}(a.Component),Ze=Object(l.b)(function(e){return{store:e}},null)($e),et=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(Y.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(o)))).renderSearchBlockProduct=function(){var e=n.props,t=e.invoice,a=e.vendorId,o=e.getInvoiceField,i=e.editing,l=e.store,c=t.toLowerCase(),s=l.purchases.filter(function(e){return e.vendorId._id===a}).filter(function(e){return-1!==e.invoice.toLowerCase().indexOf(c)}),u=l.payments.filter(function(e){return e.vendorId._id===a}),d=[],p={bill:0,pay:0,refId:""};return u.forEach(function(e){e.details.forEach(function(e){-1!==e.invoice.toLowerCase().indexOf(c)&&(p.pay+=+e.pay)})}),i?d=s:s.forEach(function(e){-1!==e.invoice.toLowerCase().indexOf(c)&&(p.bill=e.products.reduce(function(e,t){return e+t.value},0),p.bill>p.pay&&d.push(e))}),r.a.createElement(K.e,{elevation:24,className:"popout-block"},d.length?d.map(function(e,t){return r.a.createElement("ul",{className:"list-group",key:t},r.a.createElement("li",{className:"list-group-item"},r.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return o(e)}},e.invoice)),r.a.createElement("li",{className:"list-group-item"},"Date: ",e.date.slice(0,10)),r.a.createElement("li",{className:"list-group-item"},"Amount: ",e.products.reduce(function(e,t){return e+ +t.value},0).toLocaleString(),"/-"))}):r.a.createElement("h4",{className:"simple-flex"},"Empty"))},n}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.props,t=e.invoice,n=e.ind,a=e.detail,o=e.handleChangeTab,i=e.validateInvoice,l=e.vendorList;return r.a.createElement("div",null,r.a.createElement(K.l,{type:"text",variant:"standard",name:"invoice",value:t,onChange:function(e){return o(e,n)},onKeyDown:function(e){return i(e,n)}}),!l&&a.detailList&&this.renderSearchBlockProduct())}}]),t}(a.Component),tt=Object(l.b)(function(e){return{store:e}},null)(et),nt=Object(Z.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white,textAlign:"center",padding:5},body:{fontSize:13,padding:5},footer:{fontSize:16,padding:5}}})(K.h),at=function(){var e=new Date,t="2019-";return t+=e.getMonth()<9?"0"+(e.getMonth()+1)+"-":e.getMonth()+"-",t+=e.getDate()<10?"0"+(e.getDate()+1):e.getDate()},rt=function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(Y.a)(this,Object(q.a)(t).call(this))).componentDidMount=function(){e.getRefNo(),ve.bind("payments",function(){e.props.getPayment()}),ve.bind("purchases",function(){e.props.getPurchase()}),ve.bind("vendors",function(){e.props.getVendor()})},e.getRefNo=function(){var t=e.props.store.payments,n=at();if(t.length){var a=[];for(var r in t)a.push(t[r].refNo);var o=Math.max.apply(Math,a)+1;return e.setState({refNo:o,date:n})}return e.setState({refNo:1,date:n})},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(Q.a)({},a,r))},e.handleChangeTab=function(t,n){var a=t.target,r=a.name,o=a.value,i=Object(Ie.a)(e.state.details);i[n][r]=o,e.setState({details:i})},e.onSaveHandler=function(){var t=e.state,n=t._id,a=t.date,r=t.refNo,o=t.vendorId,i=t.details;t.editing?e.props.updatePayment({_id:n,date:a,refNo:r,vendorId:o,details:i}):e.props.paymentSave({date:a,refNo:r,vendorId:o,details:i}),e.getRefNo()},e.onBrowseHandler=function(){e.setState(function(e){return{options:!e.options}})},e.onClearHandler=function(){e.setState({editing:!1,_id:"",date:"",refNo:"",vendorId:"",vendorName:"",vendorList:!1,details:[{invoice:"",balance:"0",pay:"0",description:"",detailList:!1}],search:"",options:!1,getEntry:!1}),e.getRefNo()},e.onAddRow=function(){var t=Object(Ie.a)(e.state.details),n=[];return t.forEach(function(e){n.push(Object.values(e).every(function(e){return!1===e||Boolean(e)}))}),n.every(function(e){return Boolean(e)})?(t.push({invoice:"",balance:"0",pay:"0",description:"",detailList:!1}),e.setState({details:t})):e.props.onSnackHandler(!0,"Please fill previous row first")},e.onRemoveRow=function(t){var n=Object(Ie.a)(e.state.details);if(n.length>1){for(var a=0;a<n.length;a++)n[a].detailList=!1;n.splice(t,1),e.setState({details:n})}else e.setState({details:[{invoice:"",balance:"0",pay:"0",description:"",detailList:!1}]})},e.validateSearch=function(t){return 13===t.keyCode?e.setState({getEntry:!0}):27===t.keyCode?e.setState({getEntry:!1}):void 0},e.validateVendor=function(t){return 13===t.keyCode?e.setState({vendorList:!0}):27===t.keyCode?e.setState({vendorList:!1}):void 0},e.getVendorFields=function(t,n){e.setState({vendorId:t,vendorName:n,vendorList:!1,details:[{invoice:"",balance:"0",pay:"0",description:"",detailList:!1}]})},e.validateInvoice=function(t,n){var a=Object(Ie.a)(e.state.details);13===t.keyCode&&(a[n].detailList=!0),27===t.keyCode&&(a[n].detailList=!1),e.setState({ind:n,details:a})},e.getInvoiceField=function(t){var n=Object(Ie.a)(e.state.details),a=e.state.ind,r={record:0};if(n[a].invoice=t.invoice,n.forEach(function(e){e.invoice===t.invoice&&r.record++}),r.record>1)return e.props.onSnackHandler(!0,"can't enter same product");n[a].purchaseId=t._id,n[a].detailList=!1,e.setState({details:n})},e.getBalance=function(t){var n=e.props.store.payments,a={invoiceValue:0,realized:[]};return a.invoiceValue=t.products.reduce(function(e,t){return e+ +t.value},0),n.forEach(function(e){e.details.forEach(function(e){e.invoice===t.invoice&&a.realized.push(e)})}),a.realized=a.realized.reduce(function(e,t){return e+ +t.pay},0),a},e.getPaymentFields=function(t){if(t){var n=e.props.store.payments.find(function(e){return e._id===t}),a=n._id,r=n.date,o=n.refNo,i=n.vendorId,l=n.details;e.setState({_id:a,date:r.slice(0,10),refNo:o,oldVendorId:i._id,vendorId:i._id,vendorName:i.vendorName,details:l.map(function(t){var n=t.purchaseId,a=t.invoice,r=t.pay,o=t.description,i=e.props.store.purchases.find(function(e){return e.invoice===a}),l=e.getBalance(i);return{purchaseId:n,invoice:a,balance:+l.invoiceValue-+l.realized+ +r,pay:r,description:o,detailList:!1}}),editing:!0,getEntry:!1,options:!1})}},e.validatePayment=function(t){var n=Object(Ie.a)(e.state.details);if(e.state.editing){var a=n[t].invoice,r=e.props.store.purchases.find(function(e){return e.invoice===a}),o=e.getBalance(r),i=e.props.store.payments.find(function(t){return t.refNo===e.state.refNo}).details.find(function(e){return e.invoice===r.invoice});i&&i.purchaseId===n[t].purchaseId?(n[t].pay=i.pay,n[t].balance=+o.invoiceValue-+o.realized+ +i.pay):n[t].balance=+o.invoiceValue-+o.realized}else if(n[t].purchaseId){var l=n[t].invoice,c=e.props.store.purchases.find(function(e){return e.invoice===l}),s=e.getBalance(c);n[t].balance=+s.invoiceValue-+s.realized}e.setState({details:n})},e.balanceCheck=function(t){var n=Object(Ie.a)(e.state.details);n[t].pay>n[t].balance?n[t].balanceDesc="Balance will be negative by ".concat(n[t].balance-n[t].pay):n[t].balanceDesc=!1,e.setState({details:n})},e.state={editing:!1,_id:"",date:"",refNo:"",vendorId:"",vendorName:"",vendorList:!1,details:[{invoice:"",balance:"0",pay:"0",description:"",detailList:!1}],search:"",options:!1,getEntry:!1},e}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.date,a=t.refNo,o=t.vendorName,i=t.details,l=t.editing,c=this.props.classes;return r.a.createElement("div",null,r.a.createElement(K.e,{elevation:24,className:"pb-form"},r.a.createElement(K.m,{children:"Payment Form",align:"center",color:"secondary",gutterBottom:!0,variant:"h5"}),r.a.createElement(K.l,{autoFocus:!0,type:"date",margin:"dense",InputLabelProps:{shrink:!0},label:"Date",variant:"standard",name:"date",value:n,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement(K.l,{disabled:!0,type:"text",margin:"dense",label:"Ref #",variant:"standard",name:"refNo",value:a,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement(Ve,{vendorName:o,handleChange:this.handleChange,validateVendor:this.validateVendor,vendorList:this.state.vendorList,getVendorFields:this.getVendorFields}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement(K.f,{className:c.table},r.a.createElement(K.j,null,r.a.createElement(K.k,null,r.a.createElement(nt,null,"Invoice"),r.a.createElement(nt,null,"Balance"),r.a.createElement(nt,null,"Amount"),r.a.createElement(nt,null,"Description"),r.a.createElement(nt,{style:{padding:3}},"x"))),r.a.createElement(K.g,null,i.map(function(t,n){return r.a.createElement(K.k,{className:c.row,key:n},r.a.createElement(nt,null,r.a.createElement(tt,{invoice:t.invoice,vendorId:e.state.vendorId,ind:n,detail:t,vendorList:e.state.vendorList,handleChangeTab:function(t){return e.handleChangeTab(t,n)},validateInvoice:function(t){return e.validateInvoice(t,n)},getInvoiceField:e.getInvoiceField,editing:l})),r.a.createElement(nt,null,r.a.createElement(K.l,{disabled:!0,error:Boolean(t.balanceDesc),helperText:t.balanceDesc&&t.balanceDesc,type:"text",variant:"standard",name:"balance",value:t.balance,onChange:function(t){return e.handleChangeTab(t,n)}})),r.a.createElement(nt,null,r.a.createElement(K.l,{type:"text",variant:"standard",name:"pay",value:t.pay,onBlur:function(){return e.balanceCheck(n)},onFocus:function(){return e.validatePayment(n)},onChange:function(t){return e.handleChangeTab(t,n)}})),r.a.createElement(nt,null,r.a.createElement(K.l,{type:"text",variant:"standard",name:"description",value:t.description,onChange:function(t){return e.handleChangeTab(t,n)}})),r.a.createElement(nt,{style:{padding:3}},r.a.createElement(K.c,{size:"small",color:"secondary","aria-label":"Delete",className:c.fab,onClick:function(){return e.onRemoveRow(n)}},r.a.createElement(be.a,null))))})),r.a.createElement(K.i,null,r.a.createElement(K.k,{className:c.row},r.a.createElement(nt,null,"Total"),r.a.createElement(nt,null),r.a.createElement(nt,null,i.reduce(function(e,t){return parseInt(e)+parseInt(t.pay)},0).toLocaleString()),r.a.createElement(nt,null),r.a.createElement(nt,null)))))),r.a.createElement(K.c,{size:"small",color:"primary","aria-label":"Add",onClick:this.onAddRow},r.a.createElement(De.a,null)),r.a.createElement("div",{className:"buttons-group"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Basic example"},r.a.createElement("button",{className:l?"btn btn-secondary":"btn btn-primary",onClick:this.onSaveHandler},l?"Update":"Save"),r.a.createElement("button",{className:"btn btn-success",onClick:this.onBrowseHandler},"Browse"),r.a.createElement("button",{className:"btn btn-danger",onClick:this.onClearHandler},"Clear"))),this.state.options&&r.a.createElement(Ze,{options:this.state.options,getEntry:this.state.getEntry,validateSearch:this.validateSearch,getPaymentFields:this.getPaymentFields,onDelete:this.props.deletePayment})))}}]),t}(a.Component);rt.getDerivedStateFromProps=function(e,t){var n=e.store.payments,a=at();if(n.length&&!t.editing){var r=[];for(var o in n)r.push(n[o].refNo);var i=Math.max.apply(Math,r)+1;return i!==t.refNo?{refNo:i,date:a}:null}return null};var ot=Object(l.b)(function(e){return{store:e}},function(e){return{onSnackHandler:function(t,n){return e(S.onSnackHandler({snack:t,message:n}))},getVendor:function(){return e(S.getVendor())},getPurchase:function(){return e(S.getPurchase())},paymentSave:function(t){return e(S.paymentSave(t))},getPayment:function(){return e(S.getPayment())},updatePayment:function(t){return e(S.updatePayment(t))},deletePayment:function(t){return e(S.deletePayment(t))}}})(Object(Z.withStyles)(function(e){return{root:{width:"100%",padding:5,marginTop:e.spacing.unit,overflowX:"auto"},table:{minWidth:"fit-content"},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}},fab:{margin:e.spacing.unit},formControl:{minWidth:200},selectControl:{minWidth:100}}})(rt)),it=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(Y.a)(this,Object(q.a)(t).call(this,e))).renderSearchBlock=function(){var e=n.state.search,t=n.props,a=t.getRecoveryFields,o=t.onDelete,i=t.store.recoveries.filter(function(t){return-1!==t.refNo.toLowerCase().indexOf(e)});return r.a.createElement(K.e,{elevation:24,className:"popout-block"},i.length?i.map(function(e,t){return r.a.createElement("ul",{className:"list-group",key:t},r.a.createElement("li",{className:"list-group-item"},r.a.createElement(K.c,{size:"small",color:"primary","aria-label":"Edit",onClick:function(){return a(e._id)}},r.a.createElement(K.d,null,"edit_icon")),r.a.createElement(K.c,{size:"small",color:"secondary","aria-label":"Delete",onClick:function(){return o(e._id)}},r.a.createElement(be.a,null))),r.a.createElement("li",{className:"list-group-item"},"Date: ",e.date.slice(0,10)),r.a.createElement("li",{className:"list-group-item"},"Reference: ",e.refNo),r.a.createElement("li",{className:"list-group-item"},"Client: ",e.clientId.clientName))}):r.a.createElement("h4",{className:"simple-flex"},"Empty"))},n.handleChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(Q.a)({},a,r))},n.state={search:""},n}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.props,t=e.options,n=e.getEntry,a=e.validateSearch,o=this.state.search;return r.a.createElement("div",{className:"simple-flex"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(K.l,{autoFocus:!0,type:"text",margin:"dense",variant:"standard",label:"Type reference #",name:"search",value:o,onChange:this.handleChange,onKeyDown:a})),r.a.createElement("div",null,t&&n&&this.renderSearchBlock())))}}]),t}(a.Component),lt=Object(l.b)(function(e){return{store:e}},null)(it),ct=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(Y.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(o)))).renderSearchBlockProduct=function(){var e=n.props,t=e.invoice,a=e.clientId,o=e.getInvoiceField,i=e.editing,l=e.store,c=t.toLowerCase(),s=l.sales.filter(function(e){return e.clientId._id===a}).filter(function(e){return-1!==e.invoice.toLowerCase().indexOf(c)}),u=l.recoveries.filter(function(e){return e.clientId._id===a}),d=[],p={bill:0,pay:0,refId:""};return u.forEach(function(e){e.details.forEach(function(e){-1!==e.invoice.toLowerCase().indexOf(c)&&(p.pay+=+e.pay)})}),i?d=s:s.forEach(function(e){-1!==e.invoice.toLowerCase().indexOf(c)&&(p.bill=e.products.reduce(function(e,t){return e+t.value},0),p.bill>p.pay&&d.push(e))}),r.a.createElement(K.e,{elevation:24,className:"popout-block"},d.length?d.map(function(e,t){return r.a.createElement("ul",{className:"list-group",key:t},r.a.createElement("li",{className:"list-group-item"},r.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return o(e)}},e.invoice)),r.a.createElement("li",{className:"list-group-item"},"Date: ",e.date.slice(0,10)),r.a.createElement("li",{className:"list-group-item"},"Amount: ",e.products.reduce(function(e,t){return e+ +t.value},0).toLocaleString(),"/-"))}):r.a.createElement("h4",{className:"simple-flex"},"Empty"))},n}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.props,t=e.invoice,n=e.ind,a=e.detail,o=e.handleChangeTab,i=e.validateInvoice,l=e.clientList;return r.a.createElement("div",null,r.a.createElement(K.l,{type:"text",variant:"standard",name:"invoice",value:t,onChange:function(e){return o(e,n)},onKeyDown:function(e){return i(e,n)}}),!l&&a.detailList&&this.renderSearchBlockProduct())}}]),t}(a.Component),st=Object(l.b)(function(e){return{store:e}},null)(ct),ut=Object(Z.withStyles)(function(e){return{head:{backgroundColor:e.palette.common.black,color:e.palette.common.white,textAlign:"center",padding:5},body:{fontSize:13,padding:5},footer:{fontSize:16,padding:5}}})(K.h),dt=function(e){function t(){var e;return Object(B.a)(this,t),(e=Object(Y.a)(this,Object(q.a)(t).call(this))).componentDidMount=function(){e.getRefNo(),ve.bind("recoveries",function(){e.props.getRecovery()}),ve.bind("sales",function(){e.props.getSale()}),ve.bind("clients",function(){e.props.getClient()})},e.getRefNo=function(){var t=new Date,n="2019-";n+=t.getMonth()<9?"0"+(t.getMonth()+1)+"-":t.getMonth()+"-",n+=t.getDate()<10?"0"+(t.getDate()+1):t.getDate();var a=e.props.store.recoveries;if(a){if(a.length){var r=[];for(var o in a)r.push(a[o].refNo);var i=Math.max.apply(Math,r)+1;return e.setState({refNo:i,date:n})}return e.setState({refNo:1,date:n})}return e.setState({refNo:1,date:n})},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(Q.a)({},a,r))},e.handleChangeTab=function(t,n){var a=t.target,r=a.name,o=a.value,i=Object(Ie.a)(e.state.details);i[n][r]=o,e.setState({details:i})},e.onSaveHandler=function(){var t=e.state,n=t._id,a=t.date,r=t.refNo,o=t.clientId,i=t.details;t.editing?e.props.updateRecovery({_id:n,date:a,refNo:r,clientId:o,details:i}):e.props.recoverySave({date:a,refNo:r,clientId:o,details:i}),e.getRefNo()},e.onBrowseHandler=function(){e.setState(function(e){return{options:!e.options}})},e.onClearHandler=function(){e.setState({editing:!1,_id:"",date:"",refNo:"",clientId:"",clientName:"",clientList:!1,details:[{invoice:"",balance:"0",pay:"0",description:"",detailList:!1}],search:"",options:!1,getEntry:!1}),e.getRefNo()},e.onAddRow=function(){var t=Object(Ie.a)(e.state.details),n=[];return t.forEach(function(e){n.push(Object.values(e).every(function(e){return!1===e||Boolean(e)}))}),n.every(function(e){return Boolean(e)})?(t.push({invoice:"",balance:"0",pay:"0",description:"",detailList:!1}),e.setState({details:t})):e.props.onSnackHandler(!0,"Please fill previous row first")},e.onRemoveRow=function(t){var n=Object(Ie.a)(e.state.details);if(n.length>1){for(var a=0;a<n.length;a++)n[a].detailList=!1;n.splice(t,1),e.setState({details:n})}else e.setState({details:[{invoice:"",balance:"0",pay:"0",description:"",detailList:!1}]})},e.validateSearch=function(t){return 13===t.keyCode?e.setState({getEntry:!0}):27===t.keyCode?e.setState({getEntry:!1}):void 0},e.validateClient=function(t){return 13===t.keyCode?e.setState({clientList:!0}):27===t.keyCode?e.setState({clientList:!1}):void 0},e.getClientFields=function(t,n){e.setState({clientId:t,clientName:n,clientList:!1,details:[{invoice:"",balance:"0",pay:"0",description:"",detailList:!1}]})},e.validateInvoice=function(t,n){var a=Object(Ie.a)(e.state.details);13===t.keyCode&&(a[n].detailList=!0),27===t.keyCode&&(a[n].detailList=!1),e.setState({ind:n,details:a})},e.getInvoiceField=function(t){var n=Object(Ie.a)(e.state.details),a=e.state.ind,r={record:0};if(n[a].invoice=t.invoice,n.forEach(function(e){e.invoice===t.invoice&&r.record++}),r.record>1)return e.props.onSnackHandler(!0,"can't enter same product");n[a].saleId=t._id,n[a].detailList=!1,e.setState({details:n})},e.getBalance=function(t){var n=e.props.store.recoveries,a={invoiceValue:0,realized:[]};return a.invoiceValue=t.products.reduce(function(e,t){return e+ +t.value},0),n.forEach(function(e){e.details.forEach(function(e){e.invoice===t.invoice&&a.realized.push(e)})}),a.realized=a.realized.reduce(function(e,t){return e+ +t.pay},0),a},e.getRecoveryFields=function(t){if(t){var n=e.props.store.recoveries.find(function(e){return e._id===t}),a=n._id,r=n.date,o=n.refNo,i=n.clientId,l=n.details;e.setState({_id:a,date:r.slice(0,10),refNo:o,oldClient:i._id,clientId:i._id,clientName:i.clientName,details:l.map(function(t){var n=t.saleId,a=t.invoice,r=t.pay,o=t.description,i=e.props.store.sales.find(function(e){return e.invoice===a}),l=e.getBalance(i);return{saleId:n,invoice:a,balance:+l.invoiceValue-+l.realized+ +r,pay:r,description:o,detailList:!1}}),editing:!0,getEntry:!1,options:!1})}},e.validateSale=function(t){var n=Object(Ie.a)(e.state.details);if(e.state.editing){var a=n[t].invoice,r=e.props.store.sales.find(function(e){return e.invoice===a}),o=e.getBalance(r),i=e.props.store.recoveries.find(function(t){return t.refNo===e.state.refNo}).details.find(function(e){return e.invoice===r.invoice});i&&i.saleId===n[t].saleId?(n[t].pay=i.pay,n[t].balance=+o.invoiceValue-+o.realized+ +i.pay):n[t].balance=+o.invoiceValue-+o.realized}else if(n[t].saleId){var l=n[t].invoice,c=e.props.store.sales.find(function(e){return e.invoice===l}),s=e.getBalance(c);n[t].balance=+s.invoiceValue-+s.realized}e.setState({details:n})},e.balanceCheck=function(t){var n=Object(Ie.a)(e.state.details);n[t].pay>n[t].balance?n[t].balanceDesc="Balance will be negative by ".concat(n[t].balance-n[t].pay):n[t].balanceDesc=!1,e.setState({details:n})},e.state={editing:!1,_id:"",date:"",refNo:"",clientId:"",clientName:"",clientList:!1,details:[{invoice:"",balance:"0",pay:"0",description:"",detailList:!1}],search:"",options:!1,getEntry:!1},e}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.date,a=t.refNo,o=t.clientName,i=t.details,l=t.editing,c=this.props.classes;return r.a.createElement("div",null,r.a.createElement(K.e,{elevation:24,className:"pb-form"},r.a.createElement(K.m,{children:"Recovery Form",align:"center",color:"secondary",gutterBottom:!0,variant:"h5"}),r.a.createElement(K.l,{autoFocus:!0,type:"date",margin:"dense",InputLabelProps:{shrink:!0},label:"Date",variant:"standard",name:"date",value:n,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement(K.l,{disabled:!0,type:"text",margin:"dense",label:"Ref #",variant:"standard",name:"refNo",value:a,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement(We,{clientName:o,handleChange:this.handleChange,validateClient:this.validateClient,clientList:this.state.clientList,getClientFields:this.getClientFields}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement(K.f,{className:c.table},r.a.createElement(K.j,null,r.a.createElement(K.k,null,r.a.createElement(ut,null,"Invoice"),r.a.createElement(ut,null,"Balance"),r.a.createElement(ut,null,"Amount"),r.a.createElement(ut,null,"Description"),r.a.createElement(ut,{style:{padding:3}},"x"))),r.a.createElement(K.g,null,i.map(function(t,n){return r.a.createElement(K.k,{className:c.row,key:n},r.a.createElement(ut,null,r.a.createElement(st,{invoice:t.invoice,clientId:e.state.clientId,ind:n,detail:t,clientList:e.state.clientList,handleChangeTab:function(t){return e.handleChangeTab(t,n)},validateInvoice:function(t){return e.validateInvoice(t,n)},getInvoiceField:e.getInvoiceField,editing:l})),r.a.createElement(ut,null,r.a.createElement(K.l,{disabled:!0,error:Boolean(t.balanceDesc),helperText:t.balanceDesc&&t.balanceDesc,type:"text",variant:"standard",name:"balance",value:t.balance,onChange:function(t){return e.handleChangeTab(t,n)}})),r.a.createElement(ut,null,r.a.createElement(K.l,{type:"text",variant:"standard",name:"pay",value:t.pay,onBlur:function(){return e.balanceCheck(n)},onFocus:function(){return e.validateSale(n)},onChange:function(t){return e.handleChangeTab(t,n)}})),r.a.createElement(ut,null,r.a.createElement(K.l,{type:"text",variant:"standard",name:"description",value:t.description,onChange:function(t){return e.handleChangeTab(t,n)}})),r.a.createElement(ut,{style:{padding:3}},r.a.createElement(K.c,{size:"small",color:"secondary","aria-label":"Delete",className:c.fab,onClick:function(){return e.onRemoveRow(n)}},r.a.createElement(be.a,null))))})),r.a.createElement(K.i,null,r.a.createElement(K.k,{className:c.row},r.a.createElement(ut,null,"Total"),r.a.createElement(ut,null),r.a.createElement(ut,null,i.reduce(function(e,t){return parseInt(e)+parseInt(t.pay)},0).toLocaleString()),r.a.createElement(ut,null),r.a.createElement(ut,null)))))),r.a.createElement(K.c,{size:"small",color:"primary","aria-label":"Add",onClick:this.onAddRow},r.a.createElement(De.a,null)),r.a.createElement("div",{className:"buttons-group"},r.a.createElement("div",{className:"btn-group",role:"group","aria-label":"Basic example"},r.a.createElement("button",{className:l?"btn btn-secondary":"btn btn-primary",onClick:this.onSaveHandler},l?"Update":"Save"),r.a.createElement("button",{className:"btn btn-success",onClick:this.onBrowseHandler},"Browse"),r.a.createElement("button",{className:"btn btn-danger",onClick:this.onClearHandler},"Clear"))),this.state.options&&r.a.createElement(lt,{options:this.state.options,getEntry:this.state.getEntry,validateSearch:this.validateSearch,getRecoveryFields:this.getRecoveryFields,onDelete:this.props.deleteRecovery})))}}]),t}(a.Component);dt.getDerivedStateFromProps=function(e,t){var n=e.store.recoveries;if(n){if(n.length&&!t.editing){var a=[];for(var r in n)a.push(n[r].refNo);var o=Math.max.apply(Math,a)+1;return o!==t.refNo?{refNo:o}:null}return null}return null};var pt=Object(l.b)(function(e){return{store:e}},function(e){return{onSnackHandler:function(t,n){return e(S.onSnackHandler({snack:t,message:n}))},getClient:function(){return e(S.getClient())},getSale:function(){return e(S.getSale())},recoverySave:function(t){return e(S.recoverySave(t))},getRecovery:function(){return e(S.getRecovery())},updateRecovery:function(t){return e(S.updateRecovery(t))},deleteRecovery:function(t){return e(S.deleteRecovery(t))}}})(Object(Z.withStyles)(function(e){return{root:{width:"100%",padding:5,marginTop:e.spacing.unit,overflowX:"auto"},table:{minWidth:"fit-content"},row:{"&:nth-of-type(odd)":{backgroundColor:e.palette.background.default}},fab:{margin:e.spacing.unit},formControl:{minWidth:200},selectControl:{minWidth:100}}})(dt)),Et=[{path:"/dashboard/product",exact:!0,main:function(e){return r.a.createElement(Ce,e)}},{path:"/dashboard/vendor",exact:!0,main:function(e){return r.a.createElement(Te,e)}},{path:"/dashboard/client",exact:!0,main:function(e){return r.a.createElement(Ue,e)}},{path:"/dashboard/purchase",exact:!0,main:function(e){return r.a.createElement(Me,e)}},{path:"/dashboard/sale",exact:!0,main:function(e){return r.a.createElement(Je,e)}},{path:"/dashboard/payment",exact:!0,main:function(e){return r.a.createElement(ot,e)}},{path:"/dashboard/recovery",exact:!0,main:function(e){return r.a.createElement(pt,e)}}],mt=function(e){function t(){return Object(B.a)(this,t),Object(Y.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){if(!this.props.store.profile.email)return this.props.history.push("/");this.props.getClient(),this.props.getPayment(),this.props.getRecovery(),this.props.getProduct(),this.props.getPurchase(),this.props.getSale(),this.props.getVendor()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(me,null)),r.a.createElement("section",{className:"container"},Et.map(function(e,t){return r.a.createElement(X.a,{key:t,path:e.path,exact:e.exact,component:e.main})})))}}]),t}(a.Component),ft=Object(l.b)(function(e){return{store:e}},function(e){return{getClient:function(){return e(S.getClient())},getPayment:function(){return e(S.getPayment())},getRecovery:function(){return e(S.getRecovery())},getProduct:function(){return e(S.getProduct())},getPurchase:function(){return e(S.getPurchase())},getSale:function(){return e(S.getSale())},getVendor:function(){return e(S.getVendor())}}})(mt),vt=n(159),ht=n.n(vt),bt=function(e){function t(){var e,n;Object(B.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(Y.a)(this,(e=Object(q.a)(t)).call.apply(e,[this].concat(r)))).state={vertical:"bottom",horizontal:"left"},n}return Object(z.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.vertical,a=t.horizontal,o=this.props.store,i=o.isSnackOpen,l=o.snackMessage;return r.a.createElement("div",null,r.a.createElement(ht.a,{anchorOrigin:{vertical:n,horizontal:a},open:i,autoHideDuration:3e3,onClose:function(){return e.props.onSnackHandler(!1,"")},ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},l)}))}}]),t}(a.Component),St=Object(l.b)(function(e){return{store:e}},function(e){return{onSnackHandler:function(t,n){return e(S.onSnackHandler({snack:t,message:n}))}}})(bt),gt=(n(676),n(677),function(e){function t(){return Object(B.a)(this,t),Object(Y.a)(this,Object(q.a)(t).apply(this,arguments))}return Object(z.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){if(!this.props.store.profile.email)return this.props.isLoggedIn()}},{key:"render",value:function(){return this.props.store.isLoading?r.a.createElement("div",{className:"loader-container"},r.a.createElement(K.b,{color:"secondary"})):r.a.createElement(W.a,null,r.a.createElement("div",null,r.a.createElement(X.a,{path:"/",exact:!0,component:$}),r.a.createElement(X.a,{path:"/signup",exact:!0,component:de}),r.a.createElement(X.a,{path:"/dashboard",component:ft}),r.a.createElement(St,null)))}}]),t}(a.Component)),yt=Object(l.b)(function(e){return{store:e}},function(e){return{isLoggedIn:function(){return e(S.isLoggedIn())}}})(gt);n(680),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(l.a,{store:_},r.a.createElement(yt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[308,1,2]]]);
//# sourceMappingURL=main.3ea71b7f.chunk.js.map